<html>
<head>
<meta charset="utf-8">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5W8DZRW');</script>
<!-- End Google Tag Manager -->

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<link rel="Shortcut Icon" href="/assets/images/favicon.ico" type="image/x-icon"/>
<link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png"/>
<link rel="apple-touch-icon" sizes="72x72"
      href="/assets/images/apple-touch-icon-72x72.png"/>
<link rel="apple-touch-icon" sizes="114x114"
      href="/assets/images/apple-touch-icon-114x114.png"/>
<link rel="apple-touch-icon" sizes="144x144"
      href="/assets/images/apple-touch-icon-144x144.png"/>
<link rel="stylesheet" href="/0_assets/styles.css">


<!-- Social Media tag Starts -->
<!-- Place this data between the <head> tags of your website -->
<!-- Open Graph data -->
<meta property="og:title" content=""/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="https://www.kotlincn.net/docs/reference/native/gradle_plugin.html"/>
<meta property="og:image" content="https://www.kotlincn.net/assets/images/open-graph/kotlin_250x250.png"/>
    <meta property="og:description" content="">
<meta property="og:site_name" content="Kotlin"/>

<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@kotlin">
<meta name="twitter:title" content="">
    <meta name="twitter:description" content="">
<meta name="twitter:image:src" content="https://www.kotlincn.net/assets/images/twitter-card/kotlin_800x320.png">
<!-- Social Media tag Ends -->

    <title>Gradle 插件 - Kotlin 语言中文站</title>

    <script src="/0_assets/default.js"></script>
    <script src="/0_assets/common.js"></script>
    <link rel="stylesheet" href="/0_assets/default.css"/>
    <link rel="stylesheet" href="/0_assets/common.css"/>
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5W8DZRW"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<div class="global-layout">

<header class="global-header">

    <div class="global-header-panel">
        <div class="g-layout">
            <a class="global-header-logo" href="/">Kotlin</a>
<nav class="global-nav">
    <div class="nav-links">
            <a href="https://www.kotliner.cn/" class="nav-item">
                博客
            </a>
            <a href="https://discuss.kotliner.cn/" class="nav-item">
                论坛
            </a>
            <a href="/docs/reference/" class="nav-item">
                学习
            </a>
            <a href="/community/" class="nav-item">
                社区
            </a>
            <a href="https://play.kotlinlang.org" class="nav-item">
                在线试用
            </a>
    </div>

    <div class="search-button">
        <div class="icon"></div>
    </div>
</nav>        </div>
    </div>

    <div class="g-layout">
    </div>
</header>
    <div class="g-layout global-content">
        <nav class="docs-nav">
                <div class="nav-item-wrap">
                        <a href="/docs/reference/" class="nav-item is_active">
                            <span class="nav-item-text">
                                参考
                            </span>
                        </a>
                </div>
                <div class="nav-item-wrap">
                        <a href="/docs/tutorials/" class="nav-item">
                            <span class="nav-item-text">
                                教程
                            </span>
                        </a>
                </div>
                <div class="nav-item-wrap">
                        <a href="/docs/books.html" class="nav-item">
                            <span class="nav-item-text">
                                书籍
                            </span>
                        </a>
                </div>
                <div class="nav-item-wrap">
                        <a href="/docs/resources.html" class="nav-item">
                            <span class="nav-item-text">
                                更多资源
                            </span>
                        </a>
                </div>
        </nav>

    <div class="g-grid">

        <aside class="g-3">
            <div class="js-side-tree-nav">
                    <nav class="side-tree-nav">
                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="概述">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">概述</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/server-overview.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 用于服务器端</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/android-overview.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 用于 Android</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/js-overview.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 用于 JavaScript</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/native-overview.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin for Native</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/coroutines-overview.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Coroutines</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/multiplatform.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Multiplatform</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/whatsnew11.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">1.1 的新特性</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/whatsnew12.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">1.2 的新特性</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/whatsnew13.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">1.3 的新特性</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="开始">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">开始</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/basic-syntax.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">基础语法</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/idioms.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">习惯用法</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/coding-conventions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">编码规范</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="基础">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">基础</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/basic-types.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">基本类型</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/packages.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">包与导入</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/control-flow.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">控制流</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/returns.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">返回与跳转</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="类与对象">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">类与对象</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/classes.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">类与继承</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/properties.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">属性与字段</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/interfaces.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">接口</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/visibility-modifiers.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">可见性修饰符</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/extensions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">扩展</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/data-classes.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">数据类</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/sealed-classes.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">密封类</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/generics.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">泛型</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/nested-classes.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">嵌套类</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/enum-classes.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">枚举类</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/object-declarations.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">对象</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/inline-classes.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">内联类</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/delegation.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">委托</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/delegated-properties.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">委托属性</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="函数与 Lambda 表达式">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">函数与 Lambda 表达式</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/functions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">函数</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/lambdas.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Lambda 表达式</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/inline-functions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">内联函数</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="多平台程序设计">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">多平台程序设计</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/platform-specific-declarations.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">平台相关声明</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/building-mpp-with-gradle.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">以 Gradle 构建</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="其他">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">其他</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/multi-declarations.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">解构声明</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/collections.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">集合</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/ranges.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">区间</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/typecasts.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">类型检查与转换</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/this-expressions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">This 表达式</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/equality.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">相等性</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/operator-overloading.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">操作符重载</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/null-safety.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">空安全</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/exceptions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">异常</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/annotations.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">注解</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/reflection.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">反射</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/type-safe-builders.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">类型安全的构建器</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/type-aliases.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">类型别名</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="核心库">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">核心库</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="https://kotlinlang.org/api/latest/jvm/stdlib/index.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">标准库</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="https://kotlinlang.org/api/latest/kotlin.test/index.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">kotlin.test</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="参考">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">参考</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/keyword-reference.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">关键字与操作符</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/grammar.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Grammar</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="Java 互操作">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">Java 互操作</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/java-interop.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 中调用 Java</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/java-to-kotlin-interop.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Java 中调用 Kotlin</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="JavaScript">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">JavaScript</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/dynamic-type.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">动态类型</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/js-interop.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 中调用 JavaScript</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/js-to-kotlin-interop.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">JavaScript 中调用 Kotlin</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/js-modules.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">JavaScript 模块</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/js-reflection.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">JavaScript 反射</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/javascript-dce.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">JavaScript DCE</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="原生">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">原生</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/native/concurrency.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">并发</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/native/immutability.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">不可变性</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/native/libraries.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 库</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/native/platform_libs.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">平台库</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/native/multiplatform.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">多平台项目</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/native/c_interop.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">与 C 语言交互</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/native/objc_interop.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">与 Objective-C 及 Swift 交互</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <div class="tree-item-title tree-leaf-title js-item-title js-leaf-title is_active ">
                <div class="marker"></div>
                <div class="text">Gradle 插件</div>
            </div>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/native/debugging.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">调试</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/native/faq.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">FAQ</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="协程">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">协程</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/coroutines/basics.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Basics</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/coroutines/coroutines-guide.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Coroutines Guide</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/coroutines/cancellation-and-timeouts.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Cancellation and Timeouts</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/coroutines/channels.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Channels</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/coroutines/composing-suspending-functions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Composing Suspending Functions</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/coroutines/coroutine-context-and-dispatchers.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Coroutine Context and Dispatchers</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/coroutines/exception-handling.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Exception Handling</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/coroutines/select-expression.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Select Expression</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/coroutines/shared-mutable-state-and-concurrency.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Shared Mutable State and Concurrency</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="工具">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">工具</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/kotlin-doc.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">编写 Kotlin 代码文档</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/kapt.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">使用 Kapt</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/using-gradle.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">使用 Gradle</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/using-maven.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">使用 Maven</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/using-ant.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">使用 Ant</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/kotlin-osgi.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 与 OSGi</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/compiler-plugins.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">编译器插件</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/code-style-migration-guide.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">编码规范</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="演进">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">演进</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/evolution/kotlin-evolution.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 语言演进</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/evolution/components-stability.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">不同组件的稳定性</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="常见问题">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">常见问题</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/faq.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">FAQ</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/comparison-to-java.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">与 Java 比较</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/reference/comparison-to-scala.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">与 Scala 比较【官方已删除】</span>
            </a>
    </div>

    </div>

    </nav>


                <ul>
                  <li><a href="/docs/kotlin-docs.pdf" class="reference-pdf-link">
                    <span class="icon"></span>
                    <span class="text">完整 Kotlin 参考（PDF）</span>
                  </a></li>
                  <li><a href="https://www.gitbook.com/download/pdf/book/hltj/kotlin-reference-chinese" class="reference-pdf-link">
                    <span class="icon"></span>
                    <span class="text">完整 Kotlin 参考（字大PDF）</span>
                  </a></li>
                  <li><a href="https://www.gitbook.com/download/epub/book/hltj/kotlin-reference-chinese" class="reference-pdf-link">
                    <span class="icon"></span>
                    <span class="text">完整 Kotlin 参考（ePUB）</span>
                  </a></li>
                  <li><a href="https://www.gitbook.com/download/mobi/book/hltj/kotlin-reference-chinese" class="reference-pdf-link">
                    <span class="icon"></span>
                    <span class="text">完整 Kotlin 参考（Mobi）</span>
                  </a></li>
                </ul>
            </div>
        </aside>

        <article role="main" class="page-content g-9">
<a href="https://github.com/hltj/kotlin-native-cn.git/edit/master/GRADLE_PLUGIN.md"
   class="page-link-to-github"
   target="_blank"
   title="在 GitHub 上编辑本页">
        <i class="github-icon"></i>
        <span class="text">编辑本页</span>
</a>
                
<h1 id="kotlinnative-gradle-plugin">Kotlin/Native Gradle plugin</h1>
<p><em>Note: For the experimental DSL see the <a href="#experimental-plugin">corresponding section</a></em>.</p>
<h2 id="overview">Overview</h2>
<p>You may use the Gradle plugin to build <em>Kotlin/Native</em> projects. Since version 0.8 release builds of the plugin are
<a href="https://plugins.gradle.org/plugin/org.jetbrains.kotlin.konan">available</a> at the Gradle plugin portal, so you can apply it
using Gradle plugin DSL:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">plugins {
    id "org.jetbrains.kotlin.konan" version "0.9"
}
</code></pre>
</div>
<p><strong>Note</strong>: The 0.9 version of Kotlin/Native is based on Kotlin 1.3-M1 which is an EAP version and isn't available on
the plugin portal. In this case you need to add a Kotlin EAP repository in your <code>settings.gradle</code>:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">pluginManagement {
    repositories {
        gradlePluginPortal()
        maven {
            url = 'https://dl.bintray.com/kotlin/kotlin-eap'
        }
    }
}
</code></pre>
</div>
<p>You also can get the plugin from a Bintray repository. In addition to releases, this repo contains old and development
versions of the plugin which are not available at the plugin portal. To get the plugin from the Bintray repo, include
the following snippet in your build script:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">buildscript {
   repositories {
       mavenCentral()
       maven {
           url "https://dl.bintray.com/jetbrains/kotlin-native-dependencies"
       }
       maven {
           url "https://dl.bintray.com/kotlin/kotlin-eap"
       }
   }

   dependencies {
       classpath "org.jetbrains.kotlin:kotlin-native-gradle-plugin:0.8-dev-*"
   }
}

apply plugin: 'konan'
</code></pre>
</div>
<p>The Kotlin/Native plugin depends on <code>org.jetbrains.kotlin:kotlin-gradle-plugin</code>. So if a build contains both these
plugins as buildscript dependencies, it's recommended to <strong>declare them in the same <code>build.gradle</code></strong> to avoid issues with
plugin classpath.</p>
<p>By default the plugin downloads the Kotlin/Native compiler during the first run. If you have already downloaded the compiler
manually you can specify the path to its root directory using <code>konan.home</code> project property (e.g. in <code>gradle.properties</code>).</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">konan.home=/home/user/kotlin-native-0.8
</code></pre>
</div>
<p>In this case the compiler will not be downloaded by the plugin.</p>
<h2 id="building-artifacts">Building artifacts</h2>
<p>The Kotlin/Native Gradle plugin allows building artifacts of the following types:</p>
<ul>
<li>Executable</li>
<li>KLibrary - a library used by Kotlin/Native compiler (<code>*.klib</code>)</li>
<li>Interoperability library - a special type of library providing an interoperability with some native API. See <a href="c_interop.html">INTEROP.md</a> for details</li>
<li>Dynamic library (<code>*.so</code>/<code>*.dylib</code>/<code>*.dll</code>)</li>
<li>Objective-C framework</li>
<li>LLVM bitcode</li>
</ul>
<p>All Kotlin/Native artifacts should be declared in the <code>konanArtifacts</code> block. Note that the <code>konanInterop</code> script block was removed in
v0.3.4. Use the <code>interop</code> method of the <code>konanArtifact</code> block instead:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">konanArtifacts {
    program('foo')  // executable 'foo'
    library('bar')  // library 'bar'
    bitcode('baz')  // bitcode file 'baz'
    interop('qux')  // interoperability library 'qux'. Use it instead of konanInterop block.
    dynamic('quux') // dynamic library
    framework ('quuux') // Objective-C framework
}
</code></pre>
</div>
<p>All artifacts except interop libraries are built by the Kotlin/Native compiler. Such an artifact may be configured using its script block.
It is here that you can specify source directories, used libraries, and compilation flags (see <a href="#plugin-dsl"><strong>Plugin DSL</strong></a> section for details). The plugin
uses <code>src/main/kotlin/</code> as a default source directory for all compiler artifacts:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">konanArtifacts {
    // Build foo.klib
    library('foo') {
        srcDir 'src/foo/kotlin' // Use custom source path
    }

    // Build executable 'bar'
    program('bar') {
        // The default source path is used (src/main/kotlin)

        // Optimize the output code
        enableOptimizations true

        libraries {
            // Use foo.klib as a library
            artifact 'foo'
        }
    }
}
</code></pre>
</div>
<p>Interop libraries are built using the <code>cinterop</code> tool. They also may have configuration blocks but the options available in these blocks
differ from ones available for compiler artifacts. The input for such an artifact is a def-file describing a native API. By default the
def-file path is <code>src/main/c_interop/&lt;library-name&gt;.def</code> but it may be changed using the <code>defFile</code> method of the configuration block of
an interoperability library:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">konanArtifacts {
    // Interoperability library stdio.klib
    // Use the default def-file path: src/main/c_interop/stdio.def
    interop('stdio')

    // Interoperability library openal.klib
    interop('openal') {
        defFile 'src/openal/openal.def'
    }

    program('main') {
        libraries {
            // Link with stdio.klib
            artifact 'stdio'
        }
    }
}
</code></pre>
</div>
<h2 id="building-for-different-targets">Building for different targets</h2>
<p>All the artifacts declared in a project may be built for different targets. By default they are built only for the <code>host</code> target i.e. a
computer used for building. One may change the default target list using the <code>konan.targets</code> project extension:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">konan.targets = [ 'linux', 'android_arm64', 'android_arm32' ]
</code></pre>
</div>
<p>One may specify a custom target set for each particular artifact using the <code>targets</code> parameter of an artifact declaration:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">konan.targets = [ 'linux', 'android_arm64' ]

konanArtifacts {
    // This artifact has no custom targets and will be built
    // for all the default ones: 'linux', 'android_arm64'
    program('foo') { /* ... */ }

    // This artifact will be built only for Linux and Wasm32
    program('bar', targets: ['linux', 'wasm32']) { /* ... */ }

    // An Objective-C framework cannot be built for Linux and Wasm32 thus
    // these targets will be skipped and the artifact will be built only for iOS
    framework('baz', targets: [ 'linux', 'wasm32', 'iphone' ]) { /* ... */ }
}
</code></pre>
</div>
<p>The plugin creates tasks to compile each artifact for all the targets supported by the current host and declared in the <code>konan.targets</code> list.
You can perform additional configuration for a target using the <code>target</code> method of an artifact configuration block:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">konan.targets = [ 'linux', 'macbook', 'wasm32' ]

konanArtifacts {
    program('foo') {
        // This source file is used for all targets
        srcFiles 'common.kt'

        target('linux') {
            // For Linux common.kt and linux.kt will be compiled
            srcFiles 'linux.kt'
        }

        target('macbook') {
            // For MacOS common.kt and macbook.kt will be compiled
            srcFiles 'macbook.kt'
        }

        // Only common.kt will be compiled for wasm32
    }
}
</code></pre>
</div>
<p>One may access to a task for some target via artifact methods or properties:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">// Both of them return a task building artifact 'foo' for MacOS
konanArtifacts.foo.getByTarget("macbook")
konanArtifacts.foo.macbook
</code></pre>
</div>
<h2 id="using-libraries">Using libraries</h2>
<p>You can specify used libraries for artifacts of all types using the <code>libraries</code> script block:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">program('foo') {
    libraries {
        // configure the libraries used
    }
}
</code></pre>
</div>
<p>There are several ways to describe a library used by an artifact:</p>
<ul>
<li>
<p>Specify a library file directly. You can specify it using the <code>file</code> method of the <code>libraries</code> script block. All the objects accepted by
the <a href="https://docs.gradle.org/current/dsl/org.gradle.api.Project.html#org.gradle.api.Project:file(java.lang.Object)"><code>Project.file</code></a>
method may be passed there:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">  libraries {
      file 'libs/foo.klib'
      files 'lib1.klib', 'lib2.klib'
  }
</code></pre>
</div>
</li>
<li>
<p>Specify a Kotlin/Native artifact object or its name. In this case the plugin automatically chooses a library with the correct target
and sets dependencies between building tasks.</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">  libraries {
      // Artifact object or just its name may be used
      artifact 'foo'
      artifact kotlinArtifacts.bar
        
      // Artifacts from other projects are also allowed
      artifact project(':bazProject'), 'bazLibrary' 
    
      // Interopability libraries are also allowed
      // Use it instead of the `useInterop` method available in versions before 0.3.4
      artifact 'stdio'
  }
</code></pre>
</div>
</li>
<li>
<p>Specify a project containing libraries. In this case all libraries built by the project specified will be used:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">  libraries {
      allLibrariesFrom project(':subproject')
    
      // If we need only interoperability libraries
      allInteropLibrariesFrom project(':interop')
  }
</code></pre>
</div>
</li>
<li>
<p>Specify only the name of a library. In this case the compiler will look for the library in its repositories.</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">  libraries {
      klib 'foo'
      klibs 'lib1', 'lib2'
    
      // One may specify additional repositories
      // All objects accepted by the Project.file method may be used here
      useRepo 'build/libraries'
  }
</code></pre>
</div>
</li>
</ul>
<h2 id="multiplatform-build">Multiplatform build</h2>
<p>Kotlin/Native, Kotlin/JVM, and Kotlin/JS, support multiplatform projects. Such support is included in the
Kotlin/Native Gradle plugin by default and there is no need to apply any additional plugins to use it. By default
multiplatform support is turned off, and can be enabled with the <code>enableMultiplatform</code> DSL method:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">apply 'konan'

konanArtifacts {
    program('foo') {
        enableMultiplatform true
    }
}
</code></pre>
</div>
<p>The Gradle plugin adds an <code>expectedBy</code> dependency configuration that is used to specify a dependency from a Kotlin/Native
project to a common project:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">apply 'konan'

dependencies {
    expectedBy project('commonProject')
}
</code></pre>
</div>
<p>When a common project is added as an <code>expectedBy</code> dependency, all the artifacts with the multiplatform support enabled
will use its <code>main</code> source set as a common module. One may specify custom source sets for each artifact using the
<code>commonSourceSets</code> DSL method. In this case the multiplatform support will be also enabled for this artifact.</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">konanArtifacts {
    program('foo') {
        commonSourceSets 'customSourceSet', 'anotherCustomSourceSet'
    }
}
</code></pre>
</div>
<p>See more about multiplatform projects <a href="https://kotlinlang.org/docs/reference/multiplatform.html">here</a>.</p>
<h2 id="tasks">Tasks</h2>
<p>The Kotlin/Native plugin creates the following tasks:</p>
<ul>
<li>
<p><strong>compileKonan&lt;ArtifactName&gt;&lt;Target&gt;</strong>. The plugin creates a task for each target declared in the <code>konan.targets</code> list and
for each an artifact is defined in a <code>konanArtifacts</code> block. Such a task may have different properties depending on the artifact type:</p>
<p><strong>Properties available for a compiler task (executable, library or bitcode building task):</strong></p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>target             </code></td>
<td><code>String</code></td>
<td>Target the artifact is built for. Read only</td>
</tr>
<tr>
<td><code>artifactName       </code></td>
<td><code>String</code></td>
<td>Base name for the output file (without an extension)</td>
</tr>
<tr>
<td><code>destinationDir     </code></td>
<td><code>File</code></td>
<td>Directory to place the output artifact</td>
</tr>
<tr>
<td><code>artifact           </code></td>
<td><code>File</code></td>
<td>The output artifact. Read only</td>
</tr>
<tr>
<td><code>headerFile         </code></td>
<td><code>File</code></td>
<td>The output C header. Only for dynamic libraries, read only</td>
</tr>
<tr>
<td><code>srcFiles           </code></td>
<td><code>Collection&lt;FileCollection&gt;</code></td>
<td>Compiled files</td>
</tr>
<tr>
<td><code>nativeLibraries    </code></td>
<td><code>Collection&lt;FileCollection&gt;</code></td>
<td>*.bc libraries used by the artifact</td>
</tr>
<tr>
<td><code>linkerOpts         </code></td>
<td><code>List&lt;String&gt;</code></td>
<td>Additional options passed to the linker</td>
</tr>
<tr>
<td><code>enableDebug        </code></td>
<td><code>boolean</code></td>
<td>Is the debugging support enabled</td>
</tr>
<tr>
<td><code>noStdLib           </code></td>
<td><code>boolean</code></td>
<td>Is the artifact not linked with stdlib</td>
</tr>
<tr>
<td><code>noMain             </code></td>
<td><code>boolean</code></td>
<td>Is the <code>main</code> function provided by a library used</td>
</tr>
<tr>
<td><code>enableOptimizations</code></td>
<td><code>boolean</code></td>
<td>Are the optimizations enabled</td>
</tr>
<tr>
<td><code>enableAssertions   </code></td>
<td><code>boolean</code></td>
<td>Is the assertion support enabled</td>
</tr>
<tr>
<td><code>measureTime        </code></td>
<td><code>boolean</code></td>
<td>Does the compiler print phase time</td>
</tr>
<tr>
<td><code>enableMultiplatform</code></td>
<td><code>boolean</code></td>
<td>Is multiplatform support enabled for this artifact</td>
</tr>
<tr>
<td><code>commonSourceSets</code></td>
<td><code>Collection&lt;String&gt;</code></td>
<td>Names of source sets used as a common module</td>
</tr>
</tbody>
</table>
<p><strong>Properties available for a cinterop task (task building an interoperability library):</strong></p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>target        </code></td>
<td><code>String</code></td>
<td>Target the artifact is built for. Read only.</td>
</tr>
<tr>
<td><code>artifactName  </code></td>
<td><code>String</code></td>
<td>Base name for the output file (without an extension)</td>
</tr>
<tr>
<td><code>destinationDir</code></td>
<td><code>File</code></td>
<td>Directory to place the output artifact</td>
</tr>
<tr>
<td><code>artifact      </code></td>
<td><code>File</code></td>
<td>The output artifact. Read only.</td>
</tr>
<tr>
<td><code>defFile       </code></td>
<td><code>File</code></td>
<td>Def-file used by the interop</td>
</tr>
<tr>
<td><code>compilerOpts  </code></td>
<td><code>List&lt;String&gt;</code></td>
<td>Additional options passed to clang</td>
</tr>
<tr>
<td><code>linkerOpts    </code></td>
<td><code>List&lt;String&gt;</code></td>
<td>Additional options passed to a linker</td>
</tr>
<tr>
<td><code>headers       </code></td>
<td><code>Collection&lt;FileCollection&gt;</code></td>
<td>Additional headers used for stub generation</td>
</tr>
<tr>
<td><code>linkFiles     </code></td>
<td><code>Collection&lt;FileCollection&gt;</code></td>
<td>Additional files linked with the stubs</td>
</tr>
</tbody>
</table>
</li>
<li>
<p><strong>compileKonan&lt;ArtifactName&gt;</strong>. Aggregate task allowing you to build an artifact for several targets. By default it builds
the artifact for all the supported targets declared for the project. You can change this behavior by specifying the space-separated
target list in the <code>konan.build.targets</code> project property:</p>
<div class="sample" mode="shell" theme="idea">
<pre><code class="language-bash">   ./gradlew compileKonanFoo -Pkonan.build.targets='android_arm32 android_arm64'
</code></pre>
</div>
<p>The task has no properties to use by a build script.</p>
</li>
<li>
<p><strong>compileKonan</strong>. Aggregate task to build all the Kotlin/Native artifacts for all available targets. <code>konan.build.targets</code> project
property also may be used to override the target list. The task has no properties that can be used by a build script.</p>
</li>
<li>
<p><strong>run&lt;ArtifactName&gt;</strong>. Such a task is created for each executable supported by the current host and allows you to run this
executable. The task is an instance of Gradle's <a href="https://docs.gradle.org/current/dsl/org.gradle.api.tasks.Exec.html"><code>Exec</code></a>
so it supports all the settings provided by <code>Exec</code>. Additionally, run parameters may be passed to the task using the <code>runArgs</code>
project property:</p>
<div class="sample" mode="shell" theme="idea">
<pre><code class="language-bash">  ./gradlew runFoo -PrunArgs='foo bar'
</code></pre>
</div>
</li>
</ul>
<p>The plugin also edits the default <code>build</code> and <code>clean</code> tasks so that the first one allows you to build all the artifacts supported
(it's dependent on the <code>compileKonan</code> task) and the second one removes the files created by the Kotlin/Native build.</p>
<h2 id="building-dynamic-libraries-and-frameworks">Building dynamic libraries and frameworks</h2>
<p>Kotlin/Native supports building artifacts to be used by other native languages. There are two types of such artifacts:
Objective-C framework and dynamic library.</p>
<h3 id="dynamic-library">Dynamic library</h3>
<p>A dynamic library may be built using the <code>dynamic</code> artifact block. This block contains the same
options as the other ones (except <code>interop</code>) allowing you to specify source files, compiler options, and the libraries used.
Each task building a dynamic library produces two files: the library itself (a <code>*.so</code>/<code>*.dylib</code>/<code>*.dll</code> file depending
on the target platform) and a C language header. Both of them may be accessed via properties of a building task
(both properties have type <code>File</code>):</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">konanArtifacts {
    // Build a dynamic library 
    dynamic('foo') { /* ... */ }
}

konanArtifacts.foo.getByTarget('host').artifact    // Points to the library file
konanArtifacts.foo.getByTarget('host').headerFile  // Points to the header file
</code></pre>
</div>
<p>Using a dynamic library is shown in the <a href="https://github.com/JetBrains/kotlin-native/tree/master/samples/python_extension">python extension sample</a>.</p>
<h3 id="framework">Framework</h3>
<p>An Objective-C framework can be built using the <code>framework</code> artifact block. This block contains the
same options as other ones. One may access the framework built using <code>artifact</code> property of the building task
(see the <a href="#tasks"><strong>Tasks</strong></a> section). Unlike other artifacts this property points to a directory instead of a regular file.</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">konanArtifacts {
    // Build an Objective-C framework
    framework('foo') { /* ... */ }
}

konanArtifacts.foo.getByTarget('host').artifact // Points to the framework directory
</code></pre>
</div>
<p>Using a framework is shown in the <a href="https://github.com/JetBrains/kotlin-native/tree/master/samples/calculator">calculator sample</a>.</p>
<h2 id="additional-options">Additional options</h2>
<p>You can also pass additional command line keys to the compiler or cinterop tool using the <code>extraOpts</code> expression
available in the artifact configuration script block. For example this sample enables a verbose output for a link and bitcode
generation stages and prints the execution time for all the compiler phases:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">konanArtifacts {
    program('foo') {
        extraOpts '--verbose', 'linker', '--verbose', 'bitcode', '--time'
    }
}
</code></pre>
</div>
<p>Any command line key supported by the according tool (compiler or cinterop) can be used. Some of them are listed in the
tables below.</p>
<h5 id="compiler-additional-options">Compiler additional options</h5>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--disable &lt;Phase&gt;</code></td>
<td>Disable backend phase</td>
</tr>
<tr>
<td><code>--enable &lt;Phase&gt; </code></td>
<td>Enable backend phase</td>
</tr>
<tr>
<td><code>--list_phases    </code></td>
<td>List all backend phases</td>
</tr>
<tr>
<td><code>--time           </code></td>
<td>Report execution time for compiler phases</td>
</tr>
<tr>
<td><code>--verbose &lt;Phase&gt;</code></td>
<td>Trace phase execution</td>
</tr>
<tr>
<td><code>-verbose         </code></td>
<td>Enable verbose logging output</td>
</tr>
</tbody>
</table>
<h5 id="cinterop-additional-options">Cinterop additional options</h5>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-verbose &lt;boolean&gt;</code></td>
<td>Increase verbosity</td>
</tr>
<tr>
<td><code>-shims &lt;boolean&gt;</code></td>
<td>Add generation of shims tracing native library calls</td>
</tr>
</tbody>
</table>
<h2 id="plugin-dsl">Plugin DSL</h2>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">// Default targets to build for.
konan.targets = ['macbook', 'linux', 'wasm32']

// Language and API version.
konan.languageVersion = 'version'
konan.apiVersion = 'version'

konanArtifacts {
    // Targets to build this artifact for (optional, override the konan.targets list)
    program('foo', targets: ['android_arm32', 'android_arm64']) {

        // Directory with source files. The default path is src/main/kotlin.
        srcDir 'src/other'

        // Source files.
        srcFiles project.fileTree('src')
        srcFiles 'foo.kt', 'bar.kt'

        // Custom output artifact name (without extension).
        // The default is a name of the artifact
        artifactName 'customName'

        // Base Directory for the output artifacts.
        // Separate subdirectories for each target will be created
        // The default is build/konan/bin
        baseDir 'path/to/output/dir'

        libraries {
            // Library files
            file 'foo.klib'
            files 'file1.klib', file2.klib
            files project.files('file3.klib', 'file4.klib')

            // An artifact from the current project
            artifact konanArtifacts.bar
            artifact 'baz'

            // An artifact from another project
            artifact project(':path:to:a:project'), 'artifactName'

            // All libraries from another project
            allLibrariesFrom project(':some:project')

            // Only interoperability libraries from another project
            allInteropLibrariesFrom project(':some:interop:project')

            // Named libraries for search in repositories
            klib 'foo'
            klib 'bar', 'baz'

            // Custom repository paths
            useRepo 'path/to/a/repo'
            useRepos 'another/repo/1', 'another/repo/2'

        }

        // A native library (*.bc) for linking.
        nativeLibrary project.file('path/to/native/library.bc')
        nativeLibraries 'library1.bc', 'library2.bc'

        noStdLib true             // Don't link with stdlib (true/false).
        enableOptimizations true  // Enable compiler optimizations (true/false).
        enableAssertions true     // Enable assertions in binaries generated (true/false).
        enableDebug true          // Enable debugging for binaries generated (true/false).
        noDefaultLibs true        // Don't link with default libraries

        // Custom entry point
        entryPoint 'org.demo.foo'

        // Arguments to be passed to a linker.
        linkerOpts 'Some linker option', 'More linker options'

        // Print all parameters during the build.
        dumpParameters true

        // Print time of compilation phases (equivalent of the `--time` command line option).
        measureTime true

        // Add the `anotherTask` to the compilation task dependencies.
        dependsOn anotherTask

        // Pass additional command line options to the compiler.
        extraOpts '--time', '--verbose', 'linker'

        // Additional configuration for Linux.
        target('linux') {
            // Exact output directory for a file compile for the given target
            // The default is &lt;baseDir&gt;/&lt;target&gt;
            destinationDir 'exact/output/path'

            // Also all options described for this artifact above are available here.
        }
    }

    library('bar') {
        // Library has the same parameters as an executable
        // The default baseDir is build/konan/libs
    }

    bitcode('baz') {
        // Bitcode has the same parameters as an executable
        // The default baseDir is build/konan/bitcode
    }

    dynamic('quux') {
        // Dynamic library has the same parameters as an executable
        // The default baseDir is build/konan/bin
    }

    framework('quuux') {
        // Framework has the same parameters as an executable
        // The default baseDir is build/konan/bin
    }

    interop('qux') {
        // Def-file describing the native API.
        // The default path is src/main/c_interop/&lt;interop-name&gt;.def
        defFile project.file("deffile.def")

        // Custom output artifact name (without extension).
        // The default is a name of the artifact
        artifactName 'customName'

        // Base Directory for the output artifacts.
        // Separate subdirectories for each target will be created
        // The default is build/konan/libs
        baseDir 'path/to/output/dir'

        // Package to place the Kotlin API generated.
        packageName 'org.sample'

        libraries {
            // All library options from the executable example above are available here.
        }

        // Options to be passed to compiler and linker by cinterop tool.
        compilerOpts 'Options for native stubs compilation'
        linkerOpts 'Options for native stubs'

         // Additional headers to parse.
        headers project.files('header1.h', 'header2.h')

        // Directories to look for headers.
        includeDirs {
            // All objects accepted by the Project.file method may be used with both options.

            // Directories for header search (an analogue of the -I&lt;path&gt; compiler option).
            allHeaders 'path1', 'path2'

            // Additional directories to search headers listed in the 'headerFilter' def-file option.
            // -headerFilterAdditionalSearchPrefix command line option analogue.
            headerFilterOnly 'path1', 'path2'
        }
        // A shortcut for includeDirs.allHeaders.
        includeDirs "include/directory" "another/directory"

        // Additional files to link with native stubs.
        link &lt;files which will be linked with native stubs&gt;

        // Print all parameters during the build.
        dumpParameters true

        // Add the `anotherTask` to the stub generation task dependencies.
        dependsOn anotherTask

        // Pass additional command line options to the cinterop tool.
        extraOpts '-shims', 'true'

        // Additional configuration for Linux.
        target('linux') {
            // Exact output directory for a file compile for the given target
            // The default is &lt;baseDir&gt;/&lt;target&gt;
            destinationDir 'exact/output/path'

            // Also all options described for this artifact above are available here.
        }
    }
}

</code></pre>
</div>
<h2 id="multiplatform-dsl">Multiplatform DSL</h2>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">apply plugin: 'konan'

// In this example common code is located in 'foo' and 'bar' source sets of ':common' project.

konanArtifacts {
    // All the artifact types except interop libraries may use common modules.
    program('foo') {
        // All artifact settings described above are available here.
        
        // Enable multiplatform support for this artifact.
        enableMultiplatform true
        
        // Set a custom names for source sets used as a common module.
        // The default source set is 'main'
        commonSourceSets 'foo', 'bar'
    }
}

dependencies {
    // Use the ':foo' project as a common project for multiplatform build.
    expectedBy project(':common')
}
</code></pre>
</div>
<h2 id="publishing-to-maven">Publishing to Maven</h2>
<p>Publishing the Kotlin/Native artifacts depends on mechanisms which were introduced in Gradle Native support, e.g. Gradle's 
metadata feature. So some additional steps are required. First of all, the gradle version shouldn't be less 
than the gradle version of kotlin native plugin that it depends on (currently Gradle 4.7). Before Gradle 5.0, the feature 
<a href="https://github.com/gradle/gradle/blob/master/subprojects/docs/src/docs/design/gradle-module-metadata-specification.md">GRADLE_METADATA</a> 
should be enabled for the build. e.g. in settings.gradle</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">enableFeaturePreview('GRADLE_METADATA')
</code></pre>
</div>
<p>Some Maven repositories require some declarations in the <code>pom</code> files, that should be present in all auxiliary <code>pom</code> files (
platform x build types). To meet this requirement the Kotlin/Native plugin has the following syntax to do it:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">konanArtifacts {
 interop('libcurl') {
     target('linux') {
         includeDirs.headerFilterOnly '/usr/include'
     }
     target('macbook') {
         includeDirs.headerFilterOnly '/opt/local/include', '/usr/local/include'
     }
     pom {
         withXml {
             def root = asNode()
             root.appendNode('name', 'libcurl interop library')
             root.appendNode('description', 'A library providing interoperability with host libcurl')
         }
     }
 }
}
</code></pre>
</div>
<p>In this example <code>name</code> and <code>description</code> tags will be added to each generated <code>pom</code> file for <em>libcurl</em> published artifact.</p>
<h2 id="experimental-plugin">Experimental plugin</h2>
<p>In the version 0.8 a new experimental plugin has been introduced. It is integrated with new Gradle support
for native languages and provides a new DSL which is much closer to the DSL of Kotlin/JVM and Kotlin/JS
plugins than the old one.
The plugin is available at the Gradle plugin portal:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">plugins {
    id "org.jetbrains.kotlin.platform.native" version "0.9"
}
</code></pre>
</div>
<h3 id="source-management">Source management</h3>
<p>Source management in the <code>kotlin.platform.native</code> plugin is uniform with other Kotlin plugins and is based on source sets. A source set is a group of Kotlin/Native source which may contain both common and platform-specific code. The plugin provides a top-level script block <code>sourceSets</code> allowing you to configure source sets. Also it creates the default source sets <code>main</code> and <code>test</code> (for production and test code respectively).
By default the production sources are located in <code>src/main/kotlin</code> and the test sources - in <code>src/test/kotlin</code>.</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">sourceSets {
    // Adding target-independent sources.
    main.kotlin.srcDirs += 'src/main/mySources'
    
    // Adding Linux-specific code. It will be compiled in Linux binaries only.
    main.target('linux_x64').srcDirs += 'src/main/linux'
}
</code></pre>
</div>
<h3 id="targets-and-output-kinds">Targets and output kinds</h3>
<p>By default the plugin creates software components for the main and test source sets. You can access them via the <code>components</code> container provided by Gradle or via the <code>component</code> property of a corresponding source set:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">// Main component.
components.main
sourceSets.main.component

// Test component.
components.test
sourceSets.test.component
</code></pre>
</div>
<p>Components allow you to specify:</p>
<ul>
<li>Targets (e.g. Linux/x64 or iOS/arm64 etc)</li>
<li>Output kinds (e.g. executable, library, framework etc)</li>
<li>Dependencies (including interop ones)</li>
</ul>
<p>Targets can be specified by setting a corresponding component property:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">components.main {
    // Compile this component for 64-bit MacOS, Linux and Windows.
    targets = ['macos_x64', 'linux_x64', 'mingw_x64']
}
</code></pre>
</div>
<p>The plugin uses the same notation as the compiler. By default, test component uses the same targets as specified for the main one.</p>
<p>Output kinds can also be specified using a special property:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">components.main {
    // Compile the component into an executable and a Kotlin/Native library.
    outputKinds = [EXECUTABLE, KLIBRARY]
}
</code></pre>
</div>
<p>All constants used here are available inside a component configuration script block.
The plugin supports producing binaries of the following kinds:</p>
<ul>
<li><code>EXECUTABLE</code> - an executable file;</li>
<li><code>KLIBRARY</code> - a Kotlin/Native library (*.klib);</li>
<li><code>FRAMEWORK</code> - an Objective-C framework;</li>
<li><code>DYNAMIC</code> - shared native library;</li>
<li><code>STATIC</code> - static native library.</li>
</ul>
<p>Also each binary is built in two variants (build types): <code>debug</code> (debuggable, not optimized) and <code>release</code> (not debuggable, optimized).</p>
<h3 id="compile-tasks">Compile tasks</h3>
<p>The plugin creates a compilation task for each combination of the target, output kind, and build type. The tasks have the following naming convention:</p>
<pre><code>compile&lt;ComponentName&gt;&lt;BuildType&gt;&lt;OutputKind&gt;&lt;Target&gt;KotlinNative
</code></pre>
<p>For example <code>compileDebugKlibraryMacos_x64KotlinNative</code>, <code>compileTestDebugKotlinNative</code>.</p>
<p>The name contains the following parts (some of them may be empty):</p>
<ul>
<li><code>&lt;ComponentName&gt;</code> - name of a component. Empty for the main component.</li>
<li><code>&lt;BuildType&gt;</code> - <code>Debug</code> or <code>Release</code>.</li>
<li><code>&lt;OutputKind&gt;</code> - output kind name, e.g. <code>Executabe</code> or <code>Dynamic</code>. Empty if the component has only one output kind.</li>
<li><code>&lt;Target&gt;</code> - target the component is built for, e.g. <code>Macos_x64</code> or <code>Wasm32</code>. Empty if the component is built only for one target.</li>
</ul>
<p>Also the plugin creates a number of aggregate tasks allowing you to build all the binaries for a build type (e.g.
<code>assembleAllDebug</code>) or all the binaries for a particular target (e.g. <code>assembleAllWasm32</code>).</p>
<p>Basic lifecycle tasks like <code>assemble</code>, <code>build</code>, and <code>clean</code> are also available.</p>
<h3 id="running-tests">Running tests</h3>
<p>The plugin builds a test executable for all the targets specified for the <code>test</code> component. If the current host platform is
included in this list the test running tasks are also created. To run tests, execute the standard lifecycle <code>check</code> task:</p>
<div class="sample" mode="shell" theme="idea">
<pre><code class="language-bash">./gradlew check
</code></pre>
</div>
<h3 id="dependencies">Dependencies</h3>
<p>The plugin allows you to declare dependencies on files and other projects using traditional Gradle's mechanism of
configurations. The plugin supports Kotlin multiplatform projects allowing you to declare the <code>expectedBy</code> dependencies</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">dependencies {
    implementation files('path/to/file/dependencies')
    implementation project('library')
    testImplementation project('testLibrary')
    expectedBy project('common')
}
</code></pre>
</div>
<p>It's possible to depend on a Kotlin/Native library published earlier in a maven repo. The plugin relies on Gradle's
<a href="https://github.com/gradle/gradle/blob/master/subprojects/docs/src/docs/design/gradle-module-metadata-specification.md">metadata</a>
support so the corresponding feature must be enabled. Add the following line in your <code>settings.gradle</code>:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">enableFeaturePreview('GRADLE_METADATA')
</code></pre>
</div>
<p>Now you can declare a dependency on a Kotlin/Native library in the traditional <code>group:artifact:version</code> notation:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">dependencies {
    implementation 'org.sample.test:mylibrary:1.0'
    testImplementation 'org.sample.test:testlibrary:1.0'
}
</code></pre>
</div>
<p><code>implementation</code>-dependencies are also available in the component block:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">components.main {
    dependencies {
        implementation 'org.sample.test:mylibrary:1.0'
    }
}

components.test {
    dependencies {
        implementation org.sample.test:testlibrary:1.0'
    }
}
</code></pre>
</div>
<h3 id="using-cinterop">Using cinterop</h3>
<p>It's possible to declare a cinterop dependency for a component. The DSL here is similar to the one used in the <code>konan</code> plugin:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">components.main {
    dependencies {
        cinterop('mystdio') {
            // src/main/c_interop/mystdio.def is used as a def file.

            // Set up compiler options
            compilerOpts '-I/my/include/path'

            // It's possible to set up different options for different targets
            target('linux') {
                compilerOpts '-I/linux/include/path'
            }
        }
    }
}
</code></pre>
</div>
<p>Here an interop library will be built and added in the component dependencies.</p>
<p>Often it's necessary to specify target-specific linker options for a Kotlin/Native binary using an interop. It can be
done using the <code>target</code> script block:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">components.main {
    target('linux') {
        linkerOpts '-L/path/to/linux/libs'
    }
}
</code></pre>
</div>
<p>Also the <code>allTargets</code> block is available</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">components.main {
    // Configure all targets.
    allTargets {
        linkerOpts '-L/path/to/libs'
    }
}
</code></pre>
</div>
<h3 id="publishing">Publishing</h3>
<p>In the presence of <code>maven-publish</code> plugin the publications for all the binaries built are created. The plugin uses Gradle
metadata to publish the artifacts so this feature must be enabled (see the <a href="#dependencies">dependencies</a> section).</p>
<p>Now you can publish the artifacts with the standard Gradle <code>publish</code> task:</p>
<div class="sample" mode="shell" theme="idea">
<pre><code class="language-bash">./gradlew publish
</code></pre>
</div>
<p>Only <code>EXECUTABLE</code> and <code>KLIBRARY</code> binaries are published currently.</p>
<p>The plugin allows you to customize the pom generated for the publication with the <code>pom</code> code block available for every component:</p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">components.main {
    pom {
        withXml {
            def root = asNode()
            root.appendNode('name', 'My library')
            root.appendNode('description', 'A Kotlin/Native library')
        }
    }
}
</code></pre>
</div>
<h3 id="dsl-example">DSL example</h3>
<p>In this section a commented DSL is shown. 
See also the example projects that use this plugin, e.g.
<a href="https://github.com/Kotlin/kotlinx.coroutines">Kotlinx.coroutines</a>,
<a href="https://github.com/e5l/http-client-common/tree/master/samples/ios-test-application">MPP http client</a></p>
<div class="sample" mode="groovy" theme="idea">
<pre><code class="language-groovy">plugins {
    id "org.jetbrains.kotlin.platform.native" version "0.9"
}

sourceSets.main {
    // Plugin uses Gradle's source directory sets here,
    // so all the DSL methods available in SourceDirectorySet can be called here.
    // Platform independent sources.
    kotlin.srcDirs += 'src/main/customDir'

    // Linux-specific sources
    target('linux').srcDirs += 'src/main/linux'
}

components.main {

    // Set up targets
    targets = ['linux_x64', 'macos_x64', 'mingw_x64']

    // Set up output kinds
    outputKinds = [EXECUTABLE, KLIBRARY, FRAMEWORK, DYNAMIC, STATIC]
    
    // Specify custom entry point for executables
    entryPoint = "org.test.myMain"

    // Target-specific options
    target('linux_x64') {
        linkerOpts '-L/linux/lib/path'
    }

    // Targets independent options
    allTargets {
        linkerOpts '-L/common/lib/path'
    }

    dependencies {

        // Dependency on a published Kotlin/Native library.
        implementation 'org.test:mylib:1.0'

        // Dependency on a project
        implementation project('library')

        // Cinterop dependency
        cinterop('interop-name') {
            // Def-file describing the native API.
            // The default path is src/main/c_interop/&lt;interop-name&gt;.def
            defFile project.file("deffile.def")

            // Package to place the Kotlin API generated.
            packageName 'org.sample'

            // Options to be passed to compiler and linker by cinterop tool.
            compilerOpts 'Options for native stubs compilation'
            linkerOpts 'Options for native stubs'

            // Additional headers to parse.
            headers project.files('header1.h', 'header2.h')

            // Directories to look for headers.
            includeDirs {
                // All objects accepted by the Project.file method may be used with both options.

                // Directories for header search (an analogue of the -I&lt;path&gt; compiler option).
                allHeaders 'path1', 'path2'

                // Additional directories to search headers listed in the 'headerFilter' def-file option.
                // -headerFilterAdditionalSearchPrefix command line option analogue.
                headerFilterOnly 'path1', 'path2'
            }
            // A shortcut for includeDirs.allHeaders.
            includeDirs "include/directory" "another/directory"

            // Pass additional command line options to the cinterop tool.
            extraOpts '-shims', 'true'

            // Additional configuration for Linux.
            target('linux') {
                compilerOpts 'Linux-specific options'
            }
        }
    }

    // Additional pom settings for publication.
    pom {
        withXml {
            def root = asNode()
            root.appendNode('name', 'My library')
            root.appendNode('description', 'A Kotlin/Native library')
        }
    }

    // Additional options passed to the compiler.
    extraOpts '--time'
}
</code></pre>
</div>

        </article>
    </div>
    </div>

</div>

<footer role="contentinfo" class="global-footer">

    <div class="global-footer-terms">
        <div class="g-layout">

            <div class="terms-copyright">
                采用 <a href="https://github.com/JetBrains/kotlin-web-site/blob/master/LICENSE">Apache 2 许可协议</a>
            </div>

            <div class="terms-sponsor">
            由 <a href="http://jetbrains.com" class="sponsor sponsor_jetbrains" target="_blank">JetBrains</a> 赞助及开发；
            由<a href="https://hltj.me/" class="testimonial-company-link" target="_blank" rel="nofollow">灰蓝天际</a>、<a href="http://tanfujun.com" class="testimonial-company-link" target="_blank" rel="nofollow">晓_晨DEV</a> <a href="/contribute.html#中文站翻译贡献者" class="testimonial-company-link" target="_blank" rel="nofollow">等</a>译
            </div>
        </div>
    </div>

</footer>
    <script src="/0_assets/reference.js"></script>
<div class="search-popup _hidden" tabindex="1000">
    <div class="search-popup__content">
        <div class="search-popup__controls">
            <div class="search-popup__input"></div>
            <div class="search-popup__close">
                <div class="search-popup__close-icon-wrapper">
                    <div class="search-popup__close-icon"></div>
                </div>
                <div class="search-popup__close-text">esc</div>
            </div>
        </div>
        <div class="search-popup__results"></div>
    </div>
</div></body>
</html>