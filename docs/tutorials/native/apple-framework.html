<html>
<head>
<meta charset="utf-8">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5W8DZRW');</script>
<!-- End Google Tag Manager -->

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<link rel="Shortcut Icon" href="/assets/images/favicon.ico" type="image/x-icon"/>
<link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png"/>
<link rel="apple-touch-icon" sizes="72x72"
      href="/assets/images/apple-touch-icon-72x72.png"/>
<link rel="apple-touch-icon" sizes="114x114"
      href="/assets/images/apple-touch-icon-114x114.png"/>
<link rel="apple-touch-icon" sizes="144x144"
      href="/assets/images/apple-touch-icon-144x144.png"/>
<link rel="stylesheet" href="/_assets/styles.css">


<!-- Social Media tag Starts -->
<!-- Place this data between the <head> tags of your website -->
<!-- Open Graph data -->
<meta property="og:title" content=""/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="https://www.kotlincn.net/docs/tutorials/native/apple-framework.html"/>
<meta property="og:image" content="https://www.kotlincn.net/assets/images/open-graph/kotlin_250x250.png"/>
    <meta property="og:description" content="Compiling Kotlin/Native code and use it from Objective-C and Swift">
<meta property="og:site_name" content="Kotlin"/>

<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@kotlin">
<meta name="twitter:title" content="">
    <meta name="twitter:description" content="Compiling Kotlin/Native code and use it from Objective-C and Swift">
<meta name="twitter:image:src" content="https://www.kotlincn.net/assets/images/twitter-card/kotlin_800x320.png">
<!-- Social Media tag Ends -->

    <title>Kotlin/Native as an Apple Framework - Kotlin 语言中文站</title>

    <script src="/_assets/common.js"></script>
    <link rel="stylesheet" href="/_assets/common.css"/>
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5W8DZRW"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<div class="global-layout">

<header class="global-header">
    <div class="global-header-panel">
        <div class="g-layout">
            <a class="global-header-logo" href="/">Kotlin</a>
<nav class="global-nav">
    <div class="nav-links">
            <a href="https://www.kotliner.cn/" class="nav-item">
                博客
            </a>
            <a href="https://discuss.kotliner.cn/" class="nav-item">
                论坛
            </a>
            <a href="/docs/reference/" class="nav-item">
                学习
            </a>
            <a href="/community/" class="nav-item">
                社区
            </a>
            <a href="https://play.kotlinlang.org" class="nav-item">
                在线试用
            </a>
    </div>

    <div class="search-button">
        <div class="icon"></div>
    </div>
</nav>        </div>
    </div>


    <div class="g-layout">
    </div>
</header>
    <div class="g-layout global-content">
        <nav class="docs-nav">
                <div class="nav-item-wrap">
                        <a href="/docs/reference/" class="nav-item">
                            <span class="nav-item-text">
                                参考
                            </span>
                        </a>
                </div>
                <div class="nav-item-wrap">
                        <a href="/docs/tutorials/" class="nav-item is_active">
                            <span class="nav-item-text">
                                教程
                            </span>
                        </a>
                </div>
                <div class="nav-item-wrap">
                        <a href="/docs/books.html" class="nav-item">
                            <span class="nav-item-text">
                                书籍
                            </span>
                        </a>
                </div>
                <div class="nav-item-wrap">
                        <a href="/docs/resources.html" class="nav-item">
                            <span class="nav-item-text">
                                更多资源
                            </span>
                        </a>
                </div>
        </nav>

    <div class="g-grid">
        <aside class="g-3">
            <div class="js-side-tree-nav">
                    <nav class="side-tree-nav">
                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="开始">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">开始</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/getting-started.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">以 IntelliJ IDEA 入门</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/getting-started-eclipse.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">以 Eclipse 入门</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/command-line.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">使用命令行编译器</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/quick-run.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">运行代码片段</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/build-tools.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">使用构建工具</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/koans.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">心印</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/competitive-programming.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">竞技程序设计</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="Android">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">Android</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-android.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Android 开发入门</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/android-plugin.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin Android 扩展</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/android-frameworks.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Android 框架</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="Java 互操作">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">Java 互操作</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/mixing-java-kotlin-intellij.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">在一个项目中混用 Java 与 Kotlin</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="JavaScript">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">JavaScript</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/kotlin-to-javascript/kotlin-to-javascript.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 转 JavaScript</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/getting-started-gradle/getting-started-with-gradle.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">以 Gradle 入门</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/getting-started-idea/getting-started-with-intellij-idea.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">以 IntelliJ IDEA 入门</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/getting-started-maven/getting-started-with-maven.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">以 Maven 入门</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/getting-started-command-line/command-line-library-js.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">使用命令行编译器创建 Kotlin JavaScript 库</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/working-with-modules/working-with-modules.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 与 JavaScript 模块合用</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/working-with-javascript.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">与 JavaScript 合用</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/debugging-javascript/debugging-javascript.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">在浏览器中调试 Kotlin</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="多平台项目">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">多平台项目</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/mpp-ios-android.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">iOS 与 Android</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/multiplatform-library.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">多平台库</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="原生">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">原生</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/basic-kotlin-native-app.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">基本 Kotlin/Native 应用程序</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/mapping-primitive-data-types-from-c.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">映射来自 C 语言的原始数据类型</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/mapping-struct-union-types-from-c.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">映射来自 C 语言的结构与联合类型</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/mapping-function-pointers-from-c.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">映射来自 C 语言的函数指针</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/mapping-strings-from-c.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">映射来自 C 语言的字符串</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/dynamic-libraries.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin/Native 开发动态库</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <div class="tree-item-title tree-leaf-title js-item-title js-leaf-title is_active ">
                <div class="marker"></div>
                <div class="text">Kotlin/Native 开发 Apple 框架</div>
            </div>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/multiplatform-library.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">发布 Kotlin/Native 库</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/curl.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">在应用中使用 C 语言互操作与 libcurl</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/mpp-ios-android.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">构建 iOS 与 Android 应用</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="协程">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">协程</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/coroutines/async-programming.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">异步程序设计</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/coroutines/coroutines-basic-jvm.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">JVM 平台的 Kotlin 协程简介</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="Web 开发">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">Web 开发</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/httpservlets.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">用 Http Servlets 创建 web 应用</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/spring-boot-restful.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">用  Spring Boot 创建 RESTful Web 服务</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="工具">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">工具</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-and-ci.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">TeamCity 配置 Kotlin</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="教学">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">教学</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/edu-tools-learner.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">通过 EduTools 插件学习 Kotlin</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/edu-tools-educator.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">通过 EduTools 插件讲授 Kotlin</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="迁移自 Python">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">迁移自 Python</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/introduction.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">简介</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/hello-world.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Hello World</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/compiling-and-running.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">编译与运行</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/declaring-variables.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">声明变量</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/primitive-data-types-and-their-limitations.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">原生数据类型及其表示范围</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/strings.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">字符串</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/conditionals.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">条件式</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/collections.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">集合</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/loops.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">循环</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/functions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">函数</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/classes.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">类</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/exceptions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">异常</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/null-safety.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">空安全</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/functional-programming.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">函数式编程</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/packages-and-imports.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">包与导入</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/visibility-modifiers.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">可见性修饰符</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/inheritance.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">继承</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/objects-and-companion-objects.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">对象与伴生对象</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/generics.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">泛型</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/extension-functionsproperties.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">扩展函数/属性</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/member-references-and-reflection.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">成员引用与反射</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/annotations.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">注解</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/file-io.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">文件 I/O</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/scoped-resource-usage.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">作用域内资源用法</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/documentation.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">编写文档</span>
            </a>
    </div>

    </div>

    </nav>

            </div>
        </aside>

        <article role="main" class="page-content g-9">
<a href="https://github.com/hltj/kotlin-web-site-cn/edit/master/pages/docs/tutorials/native/apple-framework.md"
   class="page-link-to-github"
   target="_blank"
   title="在 GitHub 上编辑本页">
        <i class="github-icon"></i>
        <span class="text">编辑本页</span>
</a>
            <h1>
                Kotlin/Native as an Apple Framework
            </h1>
            <table>
                    <tr>
                        <td>
                            <strong>最近更新</strong>
                        </td>
                        <td>
                            2019-04-15
                        </td>
                    </tr>
            </table>
                Compiling Kotlin/Native code and use it from Objective-C and Swift
                <br/>
                <br/>
            
<p>Kotlin/Native provides bi-directional interoperability with Objective-C/Swift. 
Objective-C frameworks and libraries can be used in Kotlin code.
Kotlin modules can be used in Swift/Objective-C code too.
Besides that, Kotlin/Native has
<a href="https://github.com/JetBrains/kotlin-native/blob/master/INTEROP.md">C Interop</a>.
There is also the <a href="dynamic-libraries.html">Kotlin/Native as a Dynamic Library</a>
tutorial for more information.</p>
<p>In this tutorial, we will look at how to use Kotlin/Native code from
Objective-C and Swift applications on macOS and iOS.
We will build a framework from Kotlin code.</p>
<p>In this tutorial we'll:</p>
<ul>
<li><a href="#creating-a-kotlin-library">create a Kotlin Library</a> and compile it to a framework</li>
<li>examine the generated <a href="#generated-framework-headers">Objective-C and Swift API</a> code</li>
<li>use the framework from <a href="#using-the-code-from-objective-c">Objective-C</a> and <a href="#using-the-code-from-swift">Swift</a></li>
<li><a href="#xcode-and-framework-dependencies">Configure Xcode</a> to use the framework for <a href="#xcode-for-macos-target">macOS</a> and <a href="#xcode-for-ios-targets">iOS</a></li>
</ul>
<h2 id="creating-a-kotlin-library">Creating a Kotlin Library</h2>
<p>Kotlin/Native compiler can produce a framework for macOS and iOS
out of the Kotlin code. The created framework contains all declarations
and binaries needed to use it with Objective-C and Swift.
The best way to understand the techniques is to try it for ourselves. 
Let's create a tiny Kotlin library first and use it from an Objective-C program.</p>
<p>We create the <code>hello.kt</code> file with the library contents:</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="kotlin" theme="idea">
<pre><code class="language-kotlin">package example

object Object {
  val field = "A"
}

interface Interface {
  fun iMember() {}
}

class Clazz : Interface {
  fun member(p: Int): ULong? = 42UL
}

fun forIntegers(b: Byte, s: UShort, i: Int, l: ULong?) { }
fun forFloats(f: Float, d: Double?) { }

fun strings(str: String?) : String {
  return "That is '$str' from C"
}

fun acceptFun(f: (String) -&gt; String?) = f("Kotlin/Native rocks!")
fun supplyFun() : (String) -&gt; String? = { "$it is cool!" }
</code></pre>
</div>
<p>While it is possible to use the command line, either directly or
by combining it with a script file (i.e., sh or bat file), we should notice,
that it does not scale well for big projects that have hundreds of files and libraries.
It is then better to use the Kotlin/Native compiler with a build system, as it
helps to download and cache the Kotlin/Native compiler binaries and libraries with
transitive dependencies and run the compiler and tests.
Kotlin/Native can use the <a href="https://gradle.org">Gradle</a> build system through the
<a href="/docs/reference/building-mpp-with-gradle.html">kotlin-multiplatform</a> plugin.</p>
<p>We covered the basics of setting up an IDE compatible project with Gradle in the
<a href="basic-kotlin-native-app.html#create-gradle-project">A Basic Kotlin/Native Application</a>
tutorial. Please check it out if you are looking for detailed first steps
and instructions on how to start a new Kotlin/Native project and open it in IntelliJ IDEA.
In this tutorial, we'll look at the advanced C interop related usages of Kotlin/Native 
and
<a href="/docs/reference/building-mpp-with-gradle.html">multiplatform</a>
builds with Gradle.</p>
<p>First, let's create a project folder. All the paths in this tutorial will be relative to this folder. Sometimes
the missing directories will have to be created before any new files can be added.</p>
<p>We'll use the following 
<span class="multi-language-span" data-lang="groovy">
<code>build.gradle</code>
</span>
<span class="multi-language-span" data-lang="kotlin">
<code>build.gradle.kts</code>
</span>
Gradle build file with the following contents:</p>
<div class="multi-language-sample" data-lang="groovy" data-os="macos">
<div class="sample" data-highlight-only="" mode="groovy" theme="idea">
<pre><code>plugins {
    id 'org.jetbrains.kotlin.multiplatform' version '1.3.21'
}

repositories {
    mavenCentral()
}

kotlin {
  macosX64("native") {
    binaries {
      framework {
        baseName = "Demo"
      }
    }
  }
}

wrapper {
  gradleVersion = "5.3.1"
  distributionType = "ALL"
}
</code></pre>
</div>
</div>
<div class="multi-language-sample" data-lang="kotlin" data-os="macos">
<div class="sample" data-highlight-only="" mode="kotlin" theme="idea">
<pre><code>plugins {
    kotlin("multiplatform") version "1.3.21"
}

repositories {
    mavenCentral()
}

kotlin {
  macosX64("native") {
    binaries {
      framework {
        baseName = "Demo"
      }
    }
  }
}

tasks.withType&lt;Wrapper&gt; {
  gradleVersion = "5.3.1"
  distributionType = Wrapper.DistributionType.ALL
}
</code></pre>
</div>
</div>
<p>The prepared project sources can be directly downloaded from 
<span class="multi-language-span" data-lang="groovy" data-os="macos">
<a href="https://github.com/kotlin/web-site-samples/archive/mpp-kn-framework-groovy-macos-mac.zip">GitHub</a>.
</span>
<span class="multi-language-span" data-lang="kotlin" data-os="macos">
<a href="https://github.com/kotlin/web-site-samples/archive/mpp-kn-framework-kotlin-macos-mac.zip">GitHub</a>.
</span></p>
<p>Let's move the sources file into the <code>src/nativeMain/kotlin</code> folder under
the project. That is the default path, where sources are located, when
the <a href="/docs/reference/building-mpp-with-gradle.html">kotlin-multiplatform</a>
plugin is used. We use the following block to instruct configure the project
to generate a dynamic or shared library for us:</p>
<div class="sample" data-highlight-only="" mode="kotlin" theme="idea">
<pre><code class="language-kotlin">binaries {
  framework {
    baseName = "Demo"
  }  
}
</code></pre>
</div>
<p>Along with <code>macOS X64</code>, Kotlin/Native supports iOS <code>arm32</code>, <code>arm64</code> and <code>X64</code>
targets. We may replace the <code>macosX64</code> with respective functions as shown
in the table:</p>
<table class="zebra">
<thead>
<tr>
<th>Target platform/device</th>
<th>Gradle function</th>
</tr>
</thead>
<tbody>
<tr>
<td>macOS x86_64</td>
<td><code>macosX64()</code></td>
</tr>
<tr>
<td>iOS ARM 32</td>
<td><code>iosArm32()</code></td>
</tr>
<tr>
<td>iOS ARM 64</td>
<td><code>iosArm64()</code></td>
</tr>
<tr>
<td>iOS Simulator (x86_64)</td>
<td><code>iosX64()</code></td>
</tr>
</tbody>
</table>
<p>Let's run the <code>linkNative</code> Gradle task to build the library 
<a href="basic-kotlin-native-app.html#run-in-ide">in the IDE</a> 
or by calling the following console command:</p>
<div class="multi-language-sample" data-os="linux">
<div class="sample" data-highlight-only="" mode="bash" theme="idea">
<pre><code class="language-bash">./gradlew linkNative
</code></pre>
</div>
</div>
<div class="multi-language-sample" data-os="macos">
<div class="sample" data-highlight-only="" mode="bash" theme="idea">
<pre><code class="language-bash">./gradlew linkNative
</code></pre>
</div>
</div>
<div class="multi-language-sample" data-os="windows">
<div class="sample" data-highlight-only="" mode="bash" theme="idea">
<pre><code class="language-bash">gradlew.bat linkNative
</code></pre>
</div>
</div>
<p>Depending on the variant, the build generates the framework
into the
<code>build/bin/native/debugFramework</code>
and
<code>build/bin/native/releaseFramework</code>
folders.
Let's see what is inside</p>
<h2 id="generated-framework-headers">Generated Framework Headers</h2>
<p>Each of the created frameworks contains the header file in <code>&lt;Framework&gt;/Headers/Demo.h</code>.
The headers do not depend on the target platform (at least with Kotlin/Native v.0.9.2).
It contains the definitions for our Kotlin code and a few Kotlin-wide declarations.</p>
<p>Note, the way Kotlin/Native exports symbols is subject to change without notice.</p>
<h3 id="kotlinnative-runtime-declarations">Kotlin/Native Runtime Declarations</h3>
<p>Let's
take a look at Kotlin runtime declarations first:</p>
<div auto-indent="false" class="sample" data-highlight-only="" mode="obj-c" theme="idea">
<pre><code class="language-obj-c">NS_ASSUME_NONNULL_BEGIN

@interface KotlinBase : NSObject
- (instancetype)init __attribute__((unavailable));
+ (instancetype)new __attribute__((unavailable));
+ (void)initialize __attribute__((objc_requires_super));
@end;

@interface KotlinBase (KotlinBaseCopying) &lt;NSCopying&gt;
@end;

__attribute__((objc_runtime_name("KotlinMutableSet")))
__attribute__((swift_name("KotlinMutableSet")))
@interface DemoMutableSet&lt;ObjectType&gt; : NSMutableSet&lt;ObjectType&gt;
@end;

__attribute__((objc_runtime_name("KotlinMutableDictionary")))
__attribute__((swift_name("KotlinMutableDictionary")))
@interface DemoMutableDictionary&lt;KeyType, ObjectType&gt; : NSMutableDictionary&lt;KeyType, ObjectType&gt;
@end;

@interface NSError (NSErrorKotlinException)
@property (readonly) id _Nullable kotlinException;
@end;
</code></pre>
</div>
<p>Kotlin classes have a <code>KotlinBase</code> base class in Objective-C, the class extends
the <code>NSObject</code> class there. We also have wrappers for collections and exceptions. 
Most of the collection types are mapped to similar collection types from the other side:</p>
<table class="wide zebra">
<thead>
<tr>
<th>Kotlin</th>
<th>Swift</th>
<th>Objective-C</th>
</tr>
</thead>
<tbody>
<tr>
<td>List</td>
<td>Array</td>
<td>NSArray</td>
</tr>
<tr>
<td>MutableList</td>
<td>NSMutableArray</td>
<td>NSMutableArray</td>
</tr>
<tr>
<td>Set</td>
<td>Set</td>
<td>NSSet</td>
</tr>
<tr>
<td>Map</td>
<td>Dictionary</td>
<td>NSDictionary</td>
</tr>
<tr>
<td>MutableMap</td>
<td>NSMutableDictionary</td>
<td>NSMutableDictionary</td>
</tr>
</tbody>
</table>
<h3 id="kotlin-numbers-and-nsnumber">Kotlin Numbers and NSNumber</h3>
<p>The next part of the <code>&lt;Framework&gt;/Headers/Demo.h</code> contains number type mappings
between Kotlin/Native and <code>NSNumber</code>. We have the base class called <code>DemoNumber</code> in Objective-C
and <code>KotlinNumber</code> in Swift. It extends <code>NSNumber</code>.
There are also child classes per Kotlin number type:</p>
<table class="wide zebra">
<thead>
<tr>
<th>Kotlin</th>
<th>Swift</th>
<th>Objective-C</th>
<th>Simple type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-</code></td>
<td><code>KotlinNumber</code></td>
<td><code>&lt;Package&gt;Number</code></td>
<td><code>-</code></td>
</tr>
<tr>
<td><code>Byte</code></td>
<td><code>KotlinByte</code></td>
<td><code>&lt;Package&gt;Byte</code></td>
<td><code>char</code></td>
</tr>
<tr>
<td><code>UByte</code></td>
<td><code>KotlinUByte</code></td>
<td><code>&lt;Package&gt;UByte</code></td>
<td><code>unsigned char</code></td>
</tr>
<tr>
<td><code>Short</code></td>
<td><code>KotlinShort</code></td>
<td><code>&lt;Package&gt;Short</code></td>
<td><code>short</code></td>
</tr>
<tr>
<td><code>UShort</code></td>
<td><code>KotlinUShort</code></td>
<td><code>&lt;Package&gt;UShort</code></td>
<td><code>unsigned short</code></td>
</tr>
<tr>
<td><code>Int</code></td>
<td><code>KotlinInt</code></td>
<td><code>&lt;Package&gt;Int</code></td>
<td><code>int</code></td>
</tr>
<tr>
<td><code>UInt</code></td>
<td><code>KotlinUInt</code></td>
<td><code>&lt;Package&gt;UInt</code></td>
<td><code>unsigned int</code></td>
</tr>
<tr>
<td><code>Long</code></td>
<td><code>KotlinLong</code></td>
<td><code>&lt;Package&gt;Long</code></td>
<td><code>long long</code></td>
</tr>
<tr>
<td><code>ULong</code></td>
<td><code>KotlinULong</code></td>
<td><code>&lt;Package&gt;ULong</code></td>
<td><code>unsigned long long</code></td>
</tr>
<tr>
<td><code>Float</code></td>
<td><code>KotlinFloat</code></td>
<td><code>&lt;Package&gt;Float</code></td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>Double</code></td>
<td><code>KotlinDouble</code></td>
<td><code>&lt;Package&gt;Double</code></td>
<td><code>double</code></td>
</tr>
<tr>
<td><code>Boolean</code></td>
<td><code>KotlinBoolean</code></td>
<td><code>&lt;Package&gt;Boolean</code></td>
<td><code>BOOL/Bool</code></td>
</tr>
</tbody>
</table>
<p>Every number type has a class method to create a new instance from the related simple type. Also, there is an instance method
to extract a simple value back. Schematically, declarations look like that:</p>
<div auto-indent="false" clacss="sample" data-highlight-only="" mode="obj-c" theme="idea">
<pre><code class="code _highlighted" data-lang="text/x-objectivec">__attribute__((objc_runtime_name("Kotlin__TYPE__")))
__attribute__((swift_name("Kotlin__TYPE__")))
@interface Demo__TYPE__ : DemoNumber
- (instancetype)initWith__TYPE__:(__CTYPE__)value;
+ (instancetype)numberWith__TYPE__:(__CTYPE__)value;
@end;
</code></pre>
</div>
<p>Where <code>__TYPE__</code> is one of the simple type names and <code>__CTYPE__</code> is the related Objective-C type, e.g. <code>initWithChar(char)</code>.</p>
<p>These types are used to map boxed Kotlin number types into Objective-C and Swift.
In Swift, we may simply call the constructor to create an instance, e.g. <code>KotlinLong(value: 42)</code>.</p>
<h3 id="classes-and-objects-from-kotlin">Classes and Objects from Kotlin</h3>
<p>Let's see how <code>class</code> and <code>object</code> are mapped to Objective-C and Swift. 
The generated <code>&lt;Framework&gt;/Headers/Demo.h</code> file contains the exact definitions for 
<code>Class</code>, <code>Interface</code>, and <code>Object</code>:</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="obj-c" theme="idea">
<pre><code class="language-obj-c">NS_ASSUME_NONNULL_BEGIN

__attribute__((objc_subclassing_restricted))
__attribute__((swift_name("Object")))
@interface DemoObject : KotlinBase
+ (instancetype)alloc __attribute__((unavailable));
+ (instancetype)allocWithZone:(struct _NSZone *)zone __attribute__((unavailable));
+ (instancetype)object __attribute__((swift_name("init()")));
@property (readonly) NSString *field;
@end;

__attribute__((swift_name("Interface")))
@protocol DemoInterface
@required
- (void)iMember __attribute__((swift_name("iMember()")));
@end;

__attribute__((objc_subclassing_restricted))
__attribute__((swift_name("Clazz")))
@interface DemoClazz : KotlinBase &lt;DemoInterface&gt;
- (instancetype)init __attribute__((swift_name("init()"))) __attribute__((objc_designated_initializer));
+ (instancetype)new __attribute__((availability(swift, unavailable, message="use object initializers instead")));
- (DemoLong * _Nullable)memberP:(int32_t)p __attribute__((swift_name("member(p:)")));
@end;
</code></pre>
</div>
<p>The code is full of Objective-C attributes, which are intended to help
the use of the framework from both Objective-C and Swift languages.
<code>DemoClazz</code>, <code>DemoInterface</code>, and <code>DemoObject</code> are created for <code>Clazz</code>, <code>Interface</code>, and <code>Object</code> 
respectively. The <code>Interface</code> is turned into <code>@protocol</code>, both a <code>class</code> and an <code>object</code> are represented as
<code>@interface</code>.
The <code>Demo</code> prefix comes from the <code>-output</code> parameter
of the <code>kotlinc-native</code> compiler and the framework name. 
We see here that the nullable return type <code>ULong?</code> is turned into <code>DemoLong*</code> in Objective-C.</p>
<h3 id="global-declarations-from-kotlin">Global Declarations from Kotlin</h3>
<p>All global functions from Kotlin
are turned into <code>DemoLibKt</code> in Objective-C and into <code>LibKt</code> in Swift, where <code>Demo</code> is the framework name and set by
the <code>-output</code> parameter of <code>kotlinc-native</code>.</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="obj-c" theme="idea">
<pre><code class="language-obj-c">NS_ASSUME_NONNULL_BEGIN

__attribute__((objc_subclassing_restricted))
__attribute__((swift_name("LibKt")))
@interface DemoLibKt : KotlinBase
+ (void)forIntegersB:(int8_t)b s:(int16_t)s i:(int32_t)i l:(DemoLong * _Nullable)l __attribute__((swift_name("forIntegers(b:s:i:l:)")));
+ (void)forFloatsF:(float)f d:(DemoDouble * _Nullable)d __attribute__((swift_name("forFloats(f:d:)")));
+ (NSString *)stringsStr:(NSString * _Nullable)str __attribute__((swift_name("strings(str:)")));
+ (NSString * _Nullable)acceptFunF:(NSString * _Nullable (^)(NSString *))f __attribute__((swift_name("acceptFun(f:)")));
+ (NSString * _Nullable (^)(NSString *))supplyFun __attribute__((swift_name("supplyFun()")));
@end;
</code></pre>
</div>
<p>We see that Kotlin <code>String</code> and Objective-C <code>NSString*</code> are mapped transparently.
Similarly, <code>Unit</code> type from Kotlin is mapped to <code>void</code>. We see primitive types
are mapped directly. Non-nullable primitive types are mapped transparently.
Nullable primitive types are mapped into <code>Kotlin&lt;TYPE&gt;*</code> types, as shown in the table <a href="#kotlin-numbers-and-nsnumber">above</a>. 
Both higher order functions <code>acceptFunF</code> and <code>supplyFun</code> are included,
and accept Objective-C blocks.</p>
<p>More information about all other types mapping details can be found in the
<a href="/docs/reference/native/objc_interop.html">Objective-C Interop</a>
documentation article</p>
<h2 id="garbage-collection-and-reference-counting">Garbage Collection and Reference Counting</h2>
<p>Objective-C and Swift use reference counting. Kotlin/Native has its own garbage collection too.
Kotlin/Native garbage collection is integrated with Objective-C/Swift reference
counting. We do not need to use anything special to control the lifetime of Kotlin/Native instances
from Swift or Objective-C.</p>
<h2 id="using-the-code-from-objective-c">Using the Code from Objective-C</h2>
<p>Let's call the framework from Objective-C. For that we create the <code>main.m</code> file with 
the following content:</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="obj-c" theme="idea">
<pre><code class="language-obj-c">#import &lt;Foundation/Foundation.h&gt;
#import &lt;Demo/Demo.h&gt;

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        [[DemoObject object] field];
        
        DemoClazz* clazz = [[ DemoClazz alloc] init];
        [clazz memberP:42];
        
        [DemoLibKt forIntegersB:1 s:1 i:3 l:[DemoULong numberWithUnsignedLongLong:4]];
        [DemoLibKt forIntegersB:1 s:1 i:3 l:nil];
        
        [DemoLibKt forFloatsF:2.71 d:[DemoDouble numberWithDouble:2.71]];
        [DemoLibKt forFloatsF:2.71 d:nil];
        
        NSString* ret = [DemoLibKt acceptFunF:^NSString * _Nullable(NSString * it) {
            return [it stringByAppendingString:@" Kotlin is fun"];
        }];
        
        NSLog(@"%@", ret);
        return 0;
    }
}
</code></pre>
</div>
<p>We call Kotlin classes directly from Objective-C code. A Kotlin <code>object</code> has the class method 
function <code>object</code>, which allows us to get the only instance of the object and to call 
<code>Object</code> methods on it. 
The widespread pattern is used to create an instance of the <code>Clazz</code> class. We call
the <code>[[ DemoClazz alloc] init]</code> on Objective-C. We may also use <code>[DemoClazz new]</code>
for constructors without parameters.
Global declarations from the Kotlin sources are scoped under the <code>DemoLibKt</code> class in Objective-C.
All methods are turned into class methods of that class.
The <code>strings</code> function is turned into <code>DemoLibKt.stringsStr</code> function in Objective-C, we can
pass <code>NSString</code> directly to it. The return is visible as <code>NSString</code> too.</p>
<h2 id="using-the-code-from-swift">Using the Code from Swift</h2>
<p>The framework that we compiled with Kotlin/Native has helper attributes to make it
easier to use with Swift. Let's convert the previous Objective-C example
into Swift. As a result, we'll have the following code in <code>main.swift</code>:</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="swift" theme="idea">
<pre><code class="language-swift">import Foundation
import Demo

let kotlinObject = Object()
assert(kotlinObject === Object(), "Kotlin object has only one instance")

let field = Object().field

let clazz = Clazz()
clazz.member(p: 42)

LibKt.forIntegers(b: 1, s: 2, i: 3, l: 4)
LibKt.forFloats(f: 2.71, d: nil)

let ret = LibKt.acceptFun { "\($0) Kotlin is fun" }
if (ret != nil) {
  print(ret!)
}
</code></pre>
</div>
<p>The Kotlin code is turned into very similar looking
code in Swift. There are some small differences, though. In Kotlin any <code>object</code> has 
only one instance. Kotlin <code>object Object</code> now has a
constructor in Swift, and we use the <code>Object()</code> syntax to access the only instance of it.
The instance is always the same in Swift, so that 
<code>Object() === Object()</code> is true. 
Methods and property names are translated as-is. Kotlin <code>String</code> is turned into Swift <code>String</code> too.
Swift hides <code>NSNumber*</code> boxing from us too. We pass Swift closure to Kotlin and call a Kotlin 
lambda function from Swift too.</p>
<p>More documentation on the types mapping can be found in the 
<a href="/docs/reference/native/objc_interop.html">Objective-C Interop</a>
article.</p>
<h1 id="xcode-and-framework-dependencies">Xcode and Framework Dependencies</h1>
<p>We need to configure an Xcode project to use our framework. The configuration depends on the
target platform.</p>
<h2 id="xcode-for-macos-target">Xcode for MacOS Target</h2>
<p>First, we need to include the framework in the <code>General</code> section of the <em>target</em>
configuration. There is the <code>Linked Frameworks and Libraries</code> section to include
our framework. This will make Xcode look at our framework and resolve imports both
from Objective-C and Swift.</p>
<p>The second step is to configure the framework search path of the produced
binary. It is also known as <code>rpath</code> or <a href="https://en.wikipedia.org/wiki/Rpath">run-time search path</a>.
The binary uses the path to look for the required frameworks. We do not recommend
installing additional frameworks to the OS if it is not needed. We should understand the layout
of our future application, for example, 
we may have the <code>Frameworks</code> folder under the application bundle with all the frameworks we use. 
The <code>@rpath</code> parameter can be configured in Xcode. We need to open
the <em>project</em> configuration and find the <code>Runpath Search Paths</code> section. Here we specify
the relative path to the compiled framework.</p>
<h2 id="xcode-for-ios-targets">Xcode for iOS Targets</h2>
<p>First, we need to include the compiled framework into the Xcode project. For
this we add the framework to the <code>Embedded Binaries</code> block of the <code>General</code> section of
the <em>target</em> configuration page.</p>
<p>The second step is to then include the framework path into the <code>Framework Search Paths</code> block
of the <code>Build Settings</code> section of the <em>target</em> configuration page. It is possible to use <code>$(PROJECT_DIR)</code>
macro so simplify the setup.</p>
<p>The iOS simulator requires a framework compiled for the <code>ios_x64</code> target, the <code>iOS_sim</code> folder
in our case.</p>
<p><a href="https://stackoverflow.com/questions/30963294/creating-ios-osx-frameworks-is-it-necessary-to-codesign-them-before-distributin">The Stack Overflow thread</a>
contains few more recommendations. Also, 
<a href="https://cocoapods.org/">CocoaPods</a> package manager may be helpful to automate the process too.</p>
<h1 id="next-steps">Next Steps</h1>
<p>Kotlin/Native has bidirectional interop with Objective-C and Swift languages. 
Kotlin objects integrate with Objective-C/Swift reference counting. Unused Kotlin
objects are automatically removed. 
The <a href="https://github.com/JetBrains/kotlin-native/blob/master/OBJC_INTEROP.md">Objective-C Interop</a>
article contains more information on the interop implementation details.
Of course, it is possible to import an existing framework and use it from Kotlin. Kotlin/Native
comes with a good set of pre-imported system frameworks.</p>
<p>Kotlin/Native supports C interop too. Check out the
<a href="dynamic-libraries.html">Kotlin/Native as a Dynamic Library</a>
tutorial for that, or have a look at the
<a href="/docs/reference/native/c_interop.html">C Interop</a> documentation article</p>

        </article>
    </div>
    </div>

</div>

<footer role="contentinfo" class="global-footer">

    <div class="global-footer-terms">
        <div class="g-layout">

            <div class="global-footer-container">
                <div class="global-footer-row">
                    <div class="terms-copyright">
                        采用 <a href="https://github.com/JetBrains/kotlin-web-site/blob/master/LICENSE">Apache
                        2
                        授权许可</a>
                    </div>

                    <div class="terms-foundation">
                        Kotlin 商标受 <a
                            href="/foundation/kotlin-foundation.html">Kotlin 基金会</a>保护
                    </div>
                    <a class="terms-kit"
                            href=/assets/kotlin-media-kit.zip>宣传资料</a>
                </div>
                <div class="global-footer-row">
                    <div class="terms-sponsor">
                        由 <a href="http://jetbrains.com" class="sponsor sponsor_jetbrains"
                                                      target="_blank">JetBrains</a> 赞助及开发；
                        由<a href="https://hltj.me/" class="testimonial-company-link" target="_blank" rel="nofollow">灰蓝天际</a>、<a href="http://tanfujun.com" class="testimonial-company-link" target="_blank" rel="nofollow">晓_晨DEV</a> &nbsp;<a href="/contribute.html#中文站翻译贡献者" class="testimonial-company-link" target="_blank" rel="nofollow">等</a>译
                    </div>
                </div>

            </div>
        </div>
    </div>

</footer>
    <script src="/_assets/tutorial.js"></script>
    <link rel="stylesheet" href="/_assets/tutorial.css">
<div class="search-popup _hidden" tabindex="1000">
    <div class="search-popup__content">
        <div class="search-popup__controls">
            <div class="search-popup__input"></div>
            <div class="search-popup__close">
                <div class="search-popup__close-icon-wrapper">
                    <div class="search-popup__close-icon"></div>
                </div>
                <div class="search-popup__close-text">esc</div>
            </div>
        </div>
        <div class="search-popup__results"></div>
    </div>
</div></body>
</html>