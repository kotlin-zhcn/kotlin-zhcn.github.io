<html>
<head>
<meta charset="utf-8">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5W8DZRW');</script>
<!-- End Google Tag Manager -->

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<link rel="Shortcut Icon" href="/assets/images/favicon.ico" type="image/x-icon"/>
<link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png"/>
<link rel="apple-touch-icon" sizes="72x72"
      href="/assets/images/apple-touch-icon-72x72.png"/>
<link rel="apple-touch-icon" sizes="114x114"
      href="/assets/images/apple-touch-icon-114x114.png"/>
<link rel="apple-touch-icon" sizes="144x144"
      href="/assets/images/apple-touch-icon-144x144.png"/>
<link rel="stylesheet" href="/_assets/styles.css">


<!-- Social Media tag Starts -->
<!-- Place this data between the <head> tags of your website -->
<!-- Open Graph data -->
<meta property="og:title" content=""/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="https://www.kotlincn.net/docs/tutorials/native/mpp-ios-android.html"/>
<meta property="og:image" content="https://www.kotlincn.net/assets/images/open-graph/kotlin_250x250.png"/>
    <meta property="og:description" content="Sharing Kotlin code between iOS and Android">
<meta property="og:site_name" content="Kotlin"/>

<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@kotlin">
<meta name="twitter:title" content="">
    <meta name="twitter:description" content="Sharing Kotlin code between iOS and Android">
<meta name="twitter:image:src" content="https://www.kotlincn.net/assets/images/twitter-card/kotlin_800x320.png">
<!-- Social Media tag Ends -->

    <title>Multiplatform Project: iOS and Android - Kotlin 语言中文站</title>

    <script src="/_assets/default.js"></script>
    <script src="/_assets/common.js"></script>
    <link rel="stylesheet" href="/_assets/default.css"/>
    <link rel="stylesheet" href="/_assets/common.css"/>
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5W8DZRW"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<div class="global-layout">

<header class="global-header">
    <div class="global-header-panel">
        <div class="g-layout">
            <a class="global-header-logo" href="/">Kotlin</a>
<nav class="global-nav">
    <div class="nav-links">
            <a href="https://www.kotliner.cn/" class="nav-item">
                博客
            </a>
            <a href="https://discuss.kotliner.cn/" class="nav-item">
                论坛
            </a>
            <a href="/docs/reference/" class="nav-item">
                学习
            </a>
            <a href="/community/" class="nav-item">
                社区
            </a>
            <a href="https://play.kotlinlang.org" class="nav-item">
                在线试用
            </a>
    </div>

    <div class="search-button">
        <div class="icon"></div>
    </div>
</nav>        </div>
    </div>


    <div class="g-layout">
    </div>
</header>
    <div class="g-layout global-content">
        <nav class="docs-nav">
                <div class="nav-item-wrap">
                        <a href="/docs/reference/" class="nav-item">
                            <span class="nav-item-text">
                                参考
                            </span>
                        </a>
                </div>
                <div class="nav-item-wrap">
                        <a href="/docs/tutorials/" class="nav-item is_active">
                            <span class="nav-item-text">
                                教程
                            </span>
                        </a>
                </div>
                <div class="nav-item-wrap">
                        <a href="/docs/books.html" class="nav-item">
                            <span class="nav-item-text">
                                书籍
                            </span>
                        </a>
                </div>
                <div class="nav-item-wrap">
                        <a href="/docs/resources.html" class="nav-item">
                            <span class="nav-item-text">
                                更多资源
                            </span>
                        </a>
                </div>
        </nav>

    <div class="g-grid">
        <aside class="g-3">
            <div class="js-side-tree-nav">
                    <nav class="side-tree-nav">
                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="开始">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">开始</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/getting-started.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">以 IntelliJ IDEA 入门</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/getting-started-eclipse.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">以 Eclipse 入门</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/command-line.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">使用命令行编译器</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/quick-run.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">运行代码片段</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/build-tools.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">使用构建工具</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/koans.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">心印</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="Android">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">Android</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-android.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Android 开发入门</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/android-plugin.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin Android 扩展</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/android-frameworks.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Android 框架</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="Java 互操作">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">Java 互操作</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/mixing-java-kotlin-intellij.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">在一个项目中混用 Java 与 Kotlin</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="JavaScript">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">JavaScript</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/kotlin-to-javascript/kotlin-to-javascript.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 转 JavaScript</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/getting-started-gradle/getting-started-with-gradle.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">以 Gradle 入门</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/getting-started-idea/getting-started-with-intellij-idea.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">以 IntelliJ IDEA 入门</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/getting-started-maven/getting-started-with-maven.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">以 Maven 入门</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/getting-started-command-line/command-line-library-js.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">使用命令行编译器创建 Kotlin JavaScript 库</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/working-with-modules/working-with-modules.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 与 JavaScript 模块合用</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/working-with-javascript.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">与 JavaScript 合用</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/debugging-javascript/debugging-javascript.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">在浏览器中调试 Kotlin</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="多平台项目">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">多平台项目</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <div class="tree-item-title tree-leaf-title js-item-title js-leaf-title is_active ">
                <div class="marker"></div>
                <div class="text">iOS 与 Android</div>
            </div>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/multiplatform-library.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">多平台库</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="原生">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">原生</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/basic-kotlin-native-app.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">基本 Kotlin/Native 应用程序</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/interop-with-c.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">与 C 语言库互操作</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/mapping-primitive-data-types-from-c.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">映射来自 C 语言的原始数据类型</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/mapping-struct-union-types-from-c.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">映射来自 C 语言的结构与联合类型</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/mapping-function-pointers-from-c.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">映射来自 C 语言的函数指针</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/mapping-strings-from-c.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">映射来自 C 语言的字符串</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/working-with-klib.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">使用 Kotlin/Native 库</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/targeting-multiple-platforms.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">面向多平台</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/dynamic-libraries.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin/Native 开发动态库</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/apple-framework.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin/Native 开发 Apple 框架</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/gradle-for-kotlin-native.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Gradle 用于 Kotlin/Native</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <div class="tree-item-title tree-leaf-title js-item-title js-leaf-title is_active ">
                <div class="marker"></div>
                <div class="text">多平台项目：iOS 与 Android</div>
            </div>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="协程">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">协程</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/coroutines/async-programming.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">异步程序设计</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/coroutines/coroutines-basic-jvm.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">JVM 平台的 Kotlin 协程简介</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="Web 开发">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">Web 开发</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/httpservlets.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">用 Http Servlets 创建 web 应用</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/spring-boot-restful.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">用  Spring Boot 创建 RESTful Web 服务</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="工具">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">工具</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-and-ci.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">TeamCity 配置 Kotlin</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="教学">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">教学</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/edu-tools-learner.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">通过 EduTools 插件学习 Kotlin</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/edu-tools-educator.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">通过 EduTools 插件讲授 Kotlin</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="迁移自 Python">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">迁移自 Python</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/introduction.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">简介</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/hello-world.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Hello World</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/compiling-and-running.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">编译与运行</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/declaring-variables.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">声明变量</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/primitive-data-types-and-their-limitations.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">原生数据类型及其表示范围</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/strings.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">字符串</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/conditionals.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">条件式</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/collections.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">集合</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/loops.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">循环</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/functions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">函数</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/classes.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">类</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/exceptions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">异常</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/null-safety.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">空安全</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/functional-programming.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">函数式编程</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/packages-and-imports.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">包与导入</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/visibility-modifiers.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">可见性修饰符</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/inheritance.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">继承</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/objects-and-companion-objects.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">对象与伴生对象</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/generics.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">泛型</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/extension-functionsproperties.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">扩展函数/属性</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/member-references-and-reflection.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">成员引用与反射</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/annotations.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">注解</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/file-io.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">文件 I/O</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/scoped-resource-usage.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">作用域内资源用法</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/documentation.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">编写文档</span>
            </a>
    </div>

    </div>

    </nav>

            </div>
        </aside>

        <article role="main" class="page-content g-9">
<a href="https://github.com/hltj/kotlin-web-site-cn/edit/master/pages/docs/tutorials/native/mpp-ios-android.md"
   class="page-link-to-github"
   target="_blank"
   title="在 GitHub 上编辑本页">
        <i class="github-icon"></i>
        <span class="text">编辑本页</span>
</a>
            <h1>
                Multiplatform Project: iOS and Android
            </h1>
            <table>
                    <tr>
                        <td>
                            <strong>最近更新</strong>
                        </td>
                        <td>
                            2018-10-04
                        </td>
                    </tr>
            </table>
                Sharing Kotlin code between iOS and Android
                <br/>
                <br/>
            
<p>In this tutorial we will create an iOS and Android application, by making use of Kotlin's code sharing features.
For Android we'll be using Kotlin/JVM, while for iOS it will be Kotlin/Native.</p>
<p>We'll learn how to:</p>
<ul>
<li>Create an <a href="#creating-an-android-project">Android app</a> with Android Studio</li>
<li>Create a shared <a href="#creating-the-shared-module">Kotlin library</a>
<ul>
<li>Use it <a href="#using-sharedcode-from-android">from Android app</a></li>
<li>Start the <a href="#running-the-android-application">Android application</a></li>
</ul>
</li>
<li>Create an <a href="#creating-ios-application">iOS app</a> with Xcode
    <ul>
<li>Use the shared Kotlin library <a href="#setting-up-framework-dependency-in-xcode">from iOS app</a></li>
<li>Use <a href="#calling-kotlin-code-from-swift">Kotlin from Swift</a></li>
<li>Start the <a href="#running-the-ios-application">iOS application</a></li>
</ul>
</li>
</ul>
<p>Our goal of this tutorial is to demonstrate the ability to share code within Kotlin and the benefits it provides. While 
what we'll be looking at is a simplified application, what is shown here can be applied to real world applications,
independent of their size or complexity.</p>
<p>The application we're going to create will simply show 
<code>Kotlin Rocks on Android</code> on Android and <code>Kotlin Rocks on iOS &lt;version&gt;</code> on iOS.
The idea is to share the code that generates this message.</p>
<p>The common code is <code>"Kotlin Rocks on ${platformName()}"</code>, where <code>platformName()</code> is 
a function that is declared using the <code>expect</code> keyword. The <code>actual</code> implementation will be specific to the platform.</p>
<h1 id="setting-up-the-local-environment">Setting Up the Local Environment</h1>
<ul>
<li>
<p>We will be using <a href="https://developer.android.com/studio/">Android Studio</a> for the Android part of the tutorial. 
It is also possible to use <a href="https://jetbrains.com/idea">IntelliJ IDEA</a> Community or Ultimate edition.</p>
</li>
<li>
<p>Kotlin plugin 1.3.x or higher should be installed in the IDE. This can be verified via
<em>Language &amp; Frameworks | Kotlin Updates</em> section in the <em>Settings</em> (or <em>Preferences</em>) of the IDE.</p>
</li>
<li>
<p>macOS host operating system is required to compile for iOS and macOS devices. We need to have
<a href="https://developer.apple.com/xcode/">Xcode</a> and the tools installed and configured. Check out
the <a href="https://developer.apple.com/xcode/">Apple Developer Site</a> for more details.</p>
</li>
</ul>
<p><em>Note: We'll be using IntelliJ IDEA 2018.3 EAP, Android Studio 3.2, Kotlin 1.3.0, Xcode 10.0, macOS 10.14, Gradle 4.7</em></p>
<h1 id="creating-an-android-project">Creating an Android Project</h1>
<p>We'll create a new Android project via <em>Start New Android Project</em> item. If using IntelliJ IDEA, we need to select <em>Android</em> in 
the left panel of the <em>New Project</em> wizard.</p>
<p>It's important to make sure that the <em>Include Kotlin support</em> checkbox is ticked. For now we can leave the default settings 
in the next step of the wizard. We then proceed to select the <em>Empty Activity</em> option and click <em>Next</em>, finally pressing <em>Finish</em>.</p>
<p><strong>Note</strong> If using pre-release or EAP versions of the Kotlin plugin, the IDE may fail to open the generated project, 
giving a Gradle import <a href="https://youtrack.jetbrains.com/issue/KT-18835#focus=streamItem-27-2718879-0-0">error</a>.
This is because the right Maven repository isn't referenced in the <code>build.gradle</code> file, it can be resolved by adding 
the following entry <em>twice</em>, into each of the <code>repositories { .. }</code> blocks.</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="groovy" theme="idea">
<pre><code class="language-groovy">maven { url 'https://dl.bintray.com/kotlin/kotlin-eap' }
</code></pre>
</div>
<p><a name="gradle-upgrade"></a>
Kotlin/Native plugin requires a newer version of Gradle, let's patch the <code>gradle/wrapper/gradle-wrapper.properties</code>
and use the following <code>distrubutionUrl</code>:</p>
<pre><code>distributionUrl=https\://services.gradle.org/distributions/gradle-4.7-all.zip
</code></pre>
<p>We need to refresh the Gradle Project settings to apply these changes. Click on the <code>Sync Now</code> link or 
use the <em>Gradle</em> tool window and click the refresh action from the context menu on the root Gradle project.</p>
<p>At this point, we should be able to compile and run the Android application</p>
<h1 id="creating-the-shared-module">Creating the Shared Module</h1>
<p>The goal of the tutorial is to demonstrate Kotlin code re-use between Android and iOS. Let's start
by creating the <code>SharedCode</code> sub-project in our Gradle project. The source code from the <code>SharedCode</code>
project will be shared between platforms.
We will create several new files in our project to implement that.</p>
<h2 id="adding-kotlin-sources">Adding Kotlin Sources</h2>
<p>The idea is to make every platform show similar text: <code>Kotlin Rocks on Android</code> and 
<code>Kotlin Rocks on iOS</code>, depending on the platform. We will reuse the way we generate the message. 
Let's create the main file under <code>SharedCode/src/commonMain/kotlin/common.kt</code></p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="kotlin" theme="idea">
<pre><code class="language-kotlin">package org.kotlin.mpp.mobile

expect fun platformName(): String

fun createApplicationScreenMessage() : String {
  return "Kotlin Rocks on ${platformName()}"
}

</code></pre>
</div>
<p>That is the common part. The code to generate the final message. It <code>expect</code>s the platform
to provide the platform name from the <code>expect fun platformName(): String</code> function. We will use
the <code>createApplicationScreenMessage</code> from both Android and iOS applications.</p>
<p>Now, we need to create the implementation for Android in the <code>SharedCode/src/androidMain/kotlin/actual.kt</code>:</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="kotlin" theme="idea">
<pre><code class="language-kotlin">package org.kotlin.mpp.mobile

actual fun platformName(): String {
  return "Android"
}

</code></pre>
</div>
<p>We create a similar file for the iOS target in the <code>SharedCode/src/iosMain/kotlin/actual.kt</code>:</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="kotlin" theme="idea">
<pre><code class="language-kotlin">package org.kotlin.mpp.mobile

import platform.UIKit.UIDevice

actual fun platformName(): String {
  return UIDevice.currentDevice.systemName() +
         " " +
         UIDevice.currentDevice.systemVersion
}
</code></pre>
</div>
<p>Here we can use the <a href="https://developer.apple.com/documentation/uikit/uidevice?language=objc">UIDevice</a>
class from the Apple UIKit Framework, which is not available in Java, it is only usable in Swift and Objective-C.
Kotlin/Native compiler comes with a set of pre-imported frameworks, so we can use
the UIKit Framework without additional steps.
Objective-C and Swift Interop is covered in details in the <a href="/docs/reference/native/objc_interop.html">documentation</a></p>
<h2 id="updating-gradle-scripts">Updating Gradle Scripts</h2>
<p>The <code>SharedCode</code> project should generate several artifacts for us:</p>
<ul>
<li>JAR file for the Android project, from the <code>androidMain</code> source set</li>
<li>Apple framework
    <ul>
<li>for iOS device and App Store (<code>arm64</code> target)</li>
<li>for iOS emulator (<code>x86_64</code> target)</li>
</ul>
</li>
</ul>
<p>Let's update the Gradle scripts.</p>
<p>First, we add the new project into the <code>settings.gradle</code> file, simply by adding the following line to the end of the file:</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="groovy" theme="idea">
<pre><code class="language-groovy">include ':SharedCode'
</code></pre>
</div>
<p>Next,
we need to create the <code>SharedCode/build.gradle</code> file with the following content:</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="groovy" theme="idea">
<pre><code class="language-groovy">apply plugin: 'kotlin-multiplatform'

kotlin {
    targets {
        final def iOSTarget = System.getenv('SDK_NAME')?.startsWith("iphoneos") \
                              ? presets.iosArm64 : presets.iosX64

        fromPreset(iOSTarget, 'iOS') {
            compilations.main.outputKinds('FRAMEWORK')
        }

        fromPreset(presets.jvm, 'android')
    }

    sourceSets {
        commonMain.dependencies {
            api 'org.jetbrains.kotlin:kotlin-stdlib-common'
        }

        androidMain.dependencies {
            api 'org.jetbrains.kotlin:kotlin-stdlib'
        }
    }
}

// workaround for https://youtrack.jetbrains.com/issue/KT-27170
configurations {
    compileClasspath
}

</code></pre>
</div>
<h2 id="multiplatform-gradle-project">Multiplatform Gradle Project</h2>
<p>The <code>SharedCode/build.gradle</code> file uses the <code>kotlin-multiplatform</code> plugin to implement 
what we need. 
In the file, we define several targets <code>common</code>, <code>android</code>, and <code>iOS</code>. Each
target has its own platform. The <code>common</code> target contains the Kotlin common code 
which is included into every platform compilation. It is allowed to have <code>expect</code> declarations.
Other targets provide <code>actual</code> implementations for all <code>expect</code>-actions from the <code>common</code> target. 
The more detailed explanation of the multiplatform projects can be found on the
<a href="/docs/reference/building-mpp-with-gradle.html">Multiplatform Projects</a> documentation page.</p>
<p>Let's summarize what we have in the table:</p>
<table>
<thead>
<tr>
<th>name</th>
<th>source folder</th>
<th>target</th>
<th>artifact</th>
</tr>
</thead>
<tbody>
<tr>
<td>common</td>
<td><code>SharedCode/commonMain/kotlin</code></td>
<td>-</td>
<td>Kotlin metadata</td>
</tr>
<tr>
<td>android</td>
<td><code>SharedCode/androidMain/kotlin</code></td>
<td>JVM 6</td>
<td><code>.jar</code> file or <code>.class</code> files</td>
</tr>
<tr>
<td>iOS</td>
<td><code>SharedCode/iOSMain</code></td>
<td>iOS arm64 or x86_64</td>
<td>Apple framework</td>
</tr>
</tbody>
</table>
<p>Now it is time to refresh the Gradle project again in Android Studio. Click <em>Sync Now</em> on the yellow stripe 
or use the <em>Gradle</em> tool window and click the <code>Refresh</code> action in the context menu on the root Gradle project.
The <code>:SharedCode</code> project should be recognized by the IDE now.</p>
<p>We are ready to use the <code>SharedCode</code> library from our Android and iOS applications.</p>
<h1 id="using-sharedcode-from-android">Using SharedCode from Android</h1>
<p>For this tutorial, we want to minimize Android project changes, so we add an ordinary dependency from that 
project to the <code>SharedCode</code> project.
It is also possible to use the <code>kotlin-multiplatform</code> plugin directly in an Android 
Gradle project, instead of the <code>kotlin-android</code> plugin. For more information, please refer to the
<a href="/docs/reference/multiplatform.html">Multiplatform Projects</a> documentation.</p>
<p>Let's include the dependency from the <code>SharedCode</code> project to the Android project. We need to patch
the <code>app/build.gradle</code> file and include the following line into the <code>dependencies { .. }</code> block:</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="groovy" theme="idea">
<pre><code class="language-groovy">    implementation project(':SharedCode')
</code></pre>
</div>
<p>We need to
assign the <code>id</code> to the <code>TextView</code> control of our activity to access it from the code.
Let's patch the
<code>app/src/main/res/layout/activity_main.xml</code> file
(the name may be different if we changed it in the new project wizard)
and add several more attributes to the <code>&lt;TextView&gt;</code> element:</p>
<pre><code>        android:id="@+id/main_text"
        android:textSize="42sp"
        android:layout_margin="5sp"
        android:textAlignment="center"
</code></pre>
<p>Next, let's include the following line of code into the <code>MainActivity</code> class
from the <code>/app/src/main/java/&lt;package&gt;/MainActivity.kt</code> file, to 
the end of the <code>onCreate</code> method:</p>
<pre><code>findViewById&lt;TextView&gt;(R.id.main_text).text = createApplicationScreenMessage()
</code></pre>
<p>Use the intention from the IDE to include the missing import line:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">import org.kotlin.mpp.mobile.createApplicationScreenMessage
</code></pre>
<p>into the same file.</p>
<p>Now we have the <code>TextView</code> that will show us the text created by the shared
code function <code>createApplicationScreenMessage()</code>. It shows <code>Kotlin Rocks on Android</code>.
Let's see how it works.</p>
<h2 id="running-the-android-application">Running the Android Application</h2>
<p>Let's click on the <code>App</code> run configuration
to get our project running either on a real Android Device or on the emulator.</p>
<p><img alt="Start the Application" src="/assets/images/tutorials/native/mpp-ios-android/studio-start-app.png"/></p>
<p>And so now we can see the Application running in the Android emulator:</p>
<p><img alt="Emulator App" src="/assets/images/tutorials/native/mpp-ios-android/android-emulator-kotlin-rocks-android.png" width="30%"/></p>
<h1 id="creating-ios-application">Creating iOS Application</h1>
<p>We open Xcode and select <em>Create a new Xcode project</em> option. In 
the dialog, we choose the iOS target and select the <em>Single View App</em>. Fill the next page with defaults, 
and use the <code>KotlinIOS</code> (or something else) as the <em>Product Name</em>. Let's select Swift as the language (it is possible to use
Objective-C too). We should instruct Xcode to place the project into the <code>native</code> folder under our project, later we
will use relative paths in the configuration files.</p>
<p>The created iOS application is ready to run on the iOS emulator or on the iOS device. The device run
may require an Apple developer account and to issue a developer certificate. Xcode does its
best to guide us through the process.</p>
<p>Let's make sure we can run the application on the iPhone emulator or device.</p>
<h1 id="setting-up-framework-dependency-in-xcode">Setting up Framework Dependency in Xcode</h1>
<p>The <code>SharedCode</code> build generates iOS frameworks for use with the Xcode project.
All frameworks are in the <code>SharedCode/build/bin</code> folder. 
It creates a <em>debug</em> and <em>release</em> version for every framework target.
The frameworks are in the following paths:</p>
<pre><code>SharedCode/build/bin/iOS/main/debug/framework/SharedCode.framework
SharedCode/build/bin/iOS/main/release/framework/SharedCode.framework
</code></pre>
<p>We use the condition in the Gradle script to select the target platform for the framework.
It is either <code>iOS arm64</code> or <code>iOS x86_64</code> depending in environment variables.</p>
<h2 id="tuning-the-gradle-build-script">Tuning the Gradle Build Script</h2>
<p>We need to supply the right Framework out of those four depending on the selected target in the Xcode
project. It depends on the target configuration selected in Xcode. Also,
we'd like to make Xcode compile the Framework for us before the build.
We need to include the additional task to the end of the <code>SharedCode/build.gradle</code> Gradle file:</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="groovy" theme="idea">
<pre><code class="language-groovy">task packForXCode(type: Sync) {
    final File frameworkDir = new File(buildDir, "xcode-frameworks")
    final String mode = project.findProperty("XCODE_CONFIGURATION")?.toUpperCase() ?: 'DEBUG'

    inputs.property "mode", mode
    dependsOn kotlin.targets.iOS.compilations.main.linkTaskName("FRAMEWORK", mode)

    from { kotlin.targets.iOS.compilations.main.getBinary("FRAMEWORK", mode).parentFile }
    into frameworkDir

    doLast {
        new File(frameworkDir, 'gradlew').with {
            text = "#!/bin/bash\nexport 'JAVA_HOME=${System.getProperty("java.home")}'\ncd '${rootProject.rootDir}'\n./gradlew \$@\n"
            setExecutable(true)
        }
    }
}

tasks.build.dependsOn packForXCode
</code></pre>
</div>
<p>Note, the task may not work <a href="https://github.com/gradle/gradle/issues/6330">correctly</a>
if you use Gradle older than 4.10. 
In this tutorial we have already <a href="#gradle-upgrade">upgraded it to 4.7</a>.</p>
<p>Let's switch back to the Android Studio and execute the <code>build</code> target of the <code>SharedCode</code> project from
the <em>Gradle</em> tool window. The task looks for environment variables set by the Xcode build and copies
the right variant of the framework into the <code>SharedCode/build/xcode-frameworks</code> folder. We then include the
framework from that folder into the build</p>
<h2 id="setting-up-xcode">Setting up Xcode</h2>
<p>We add the <code>SharedCode</code> framework to the Xcode project.
For that let's click on the root node of the <em>project navigator</em> and select the <em>target</em> settings.
Next, we click on the <code>+</code> in the <em>Embedded Binaries</em> section, click <em>Add Other…</em> button in the dialog
to choose the framework from the disk. We can point to the following folder:</p>
<pre><code>SharedCode/build/xcode-frameworks/SharedCode.framework
</code></pre>
<p>We will then see something similar to this: 
<img alt="Xcode General Screen" src="/assets/images/tutorials/native/mpp-ios-android/xcode-general.png"/></p>
<p>We need to disable the <em>Bitcode</em> feature in the project too. Kotlin/Native produces the fully native
binaries, not the LLVM bitcode, so we need to navigate to the <em>Build Settings</em> tab, pick the <em>All</em> sub-tab below, and type <code>bitcode</code> into
the search field. Select <code>No</code> for the <em>Enable Bitcode</em> option.</p>
<p><img alt="Xcode Build Settings" src="/assets/images/tutorials/native/mpp-ios-android/xcode-bitcode.png"/></p>
<p>Now we need to explain to Xcode, where to look for frameworks. We need to add the <em>relative</em> path 
<code>$(SRCROOT)/../../SharedCode/build/xcode-frameworks</code> into the <em>Search Paths | Framework Search Paths</em> section.
Open the <em>Build Settings</em> tab again, pick the <em>All</em> sub-tab below, and type the <em>Framework Search Paths</em> into
the search field to easily find the option.
Xcode will then show the substituted path in the UI for it.</p>
<p><img alt="Xcode Build Settings" src="/assets/images/tutorials/native/mpp-ios-android/xcode-search-path.png"/></p>
<p>The final step is to make Xcode call our Gradle build to prepare the <code>SharedCode</code> framework before each run.
We open the <em>Build Phases</em> tab and click <code>+</code> to add the <em>New Run Script Phase</em> and add the following code into it:</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="bash" theme="idea">
<pre><code class="language-bash">cd "$SRCROOT/../../SharedCode/build/xcode-frameworks"
./gradlew :SharedCode:packForXCode -PXCODE_CONFIGURATION=${CONFIGURATION}
</code></pre>
</div>
<p>Note, here we use the <code>$SRCROOT/../..</code> as the path to the root of our Gradle project.
It can depend on the way the Xcode project was created. Also, we use the generated
<code>SharedCode/build/xcode-frameworks/gradlew</code> script,
the <code>packForXCode</code> task generates it. We assumed that the Gradle build is executed at least once,
before opening the Xcode project on a fresh machine</p>
<p><img alt="Xcode Build Phases" src="/assets/images/tutorials/native/mpp-ios-android/xcode-run-script.png"/></p>
<p>We should drag the created build phase to the top of the list</p>
<p><img alt="Xcode Build Phases" src="/assets/images/tutorials/native/mpp-ios-android/xcode-run-script-order.png"/></p>
<p>We are now ready to start coding the iOS application and to use the Kotlin code from it</p>
<h2 id="calling-kotlin-code-from-swift">Calling Kotlin Code from Swift</h2>
<p>Remember, our goal is to show the text message on the screen. As we see, our iOS application does not draw
anything on the screen. Let's make it show the <code>UILabel</code> with the text message. 
We need to replace the contents
of the <code>ViewController.swift</code> file with the following code:</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="swift" theme="idea">
<pre><code class="language-swift">import UIKit
import SharedCode

class ViewController: UIViewController {
    override func viewDidLoad() {
        super.viewDidLoad()
        
        let label = UILabel(frame: CGRect(x: 0, y: 0, width: 300, height: 21))
        label.center = CGPoint(x: 160, y: 285)
        label.textAlignment = .center
        label.font = label.font.withSize(25)
        label.text = CommonKt.createApplicationScreenMessage()
        view.addSubview(label)
    }
}

</code></pre>
</div>
<p>We use the <code>import SharedCode</code> to import our Framework, which we compiled with Kotlin/Native from Kotlin code.
Next, we call the Kotlin function from it as <code>CommonKt.createApplicationScreenMessage()</code>. Follow the 
<a href="/docs/tutorials/native/apple-framework.html">Kotlin/Native as an Apple Framework</a> tutorial for
more details on the Kotlin/Native to Swift (or Objective-C) interop.</p>
<p>Right now, we are ready to start the application in the emulator or on an iOS device.</p>
<h2 id="running-the-ios-application">Running the iOS Application</h2>
<p>Let's click the <em>Run</em> button in Xcode, and we'll see our application running</p>
<p><img alt="Emulator App" src="/assets/images/tutorials/native/mpp-ios-android/iPhone-emulator-kotlin-rocks.png" width="30%"/></p>
<h1 id="summary">Summary</h1>
<p>In the tutorial we:</p>
<ul>
<li>created an Android application in Android Studio</li>
<li>created an iOS application in Xcode</li>
<li>added Kotlin multiplatform sub-project
    <ul>
<li>with shared Kotlin code</li>
<li>compiled it to Android Jar</li>
<li>compiled it to iOS Framework</li>
</ul>
</li>
<li>put it all together and re-used Kotlin code</li>
</ul>
<p>We may find the whole sources from that tutorial on <a href="https://github.com/JetBrains/kotlin-examples/tree/master/tutorials/mpp-iOS-Android">GitHub</a>.</p>
<h1 id="next-steps">Next Steps</h1>
<p>This is only the beginning and a small example of Kotlin code sharing
between iOS and Android (and other platforms) with Kotlin, Kotlin/Native
and Kotlin multiplatform projects. The same approach works for real applications,
independent of their size or complexity.</p>
<p>Kotlin/Native interop with Swift and Objective-C is covered in the
<a href="/docs/reference/native/objc_interop.html">documentation</a> article. Also,
the same topic is covered in the <a href="apple-framework.html">Kotlin/Native as an Apple Framework</a>
tutorial.</p>
<p>The multiplatform projects and multiplatform libraries are discussed in the <a href="/docs/reference/multiplatform.html">documentation</a> too.</p>
<p>Sharing code between platforms is a powerful technique, but it may be hard to
accomplish without rich APIs that we have in Android, JVM, or iOS platforms.
Multiplatform libraries can be used to fix that. They bring rich APIs
directly in the common Kotlin code. There are several examples of such libraries:</p>
<ul>
<li><a href="https://github.com/Kotlin/kotlinx.coroutines/blob/master/native/README.md">kotlinx.coroutines</a></li>
<li><a href="https://github.com/Kotlin/kotlinx-io">kotlinx.io</a></li>
<li><a href="https://github.com/Kotlin/kotlinx.serialization">kotlinx.serialization</a></li>
<li><a href="https://ktor.io/">ktor</a></li>
<li><a href="https://ktor.io/clients/http-client.html">ktor-http-client</a></li>
</ul>
<p>Looking for more APIs? It is easy to create a <a href="/docs/tutorials/multiplatform-library.html">multiplatform library</a> and share it!</p>

        </article>
    </div>
    </div>

</div>

<footer role="contentinfo" class="global-footer">

    <div class="global-footer-terms">
        <div class="g-layout">

            <div class="terms-copyright">
                采用 <a href="https://github.com/JetBrains/kotlin-web-site/blob/master/LICENSE">Apache 2 许可协议</a>
            </div>

            <div class="terms-sponsor">
            由 <a href="http://jetbrains.com" class="sponsor sponsor_jetbrains" target="_blank">JetBrains</a> 赞助及开发；
            由<a href="https://hltj.me/" class="testimonial-company-link" target="_blank" rel="nofollow">灰蓝天际</a>、<a href="http://tanfujun.com" class="testimonial-company-link" target="_blank" rel="nofollow">晓_晨DEV</a> <a href="/contribute.html#中文站翻译贡献者" class="testimonial-company-link" target="_blank" rel="nofollow">等</a>译
            </div>
        </div>
    </div>

</footer>
    <script src="/_assets/tutorial.js"></script>
<div class="search-popup _hidden" tabindex="1000">
    <div class="search-popup__content">
        <div class="search-popup__controls">
            <div class="search-popup__input"></div>
            <div class="search-popup__close">
                <div class="search-popup__close-icon-wrapper">
                    <div class="search-popup__close-icon"></div>
                </div>
                <div class="search-popup__close-text">esc</div>
            </div>
        </div>
        <div class="search-popup__results"></div>
    </div>
</div></body>
</html>