<html>
<head>
<meta charset="utf-8">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5W8DZRW');</script>
<!-- End Google Tag Manager -->

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<link rel="Shortcut Icon" href="/assets/images/favicon.ico" type="image/x-icon"/>
<link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png"/>
<link rel="apple-touch-icon" sizes="72x72"
      href="/assets/images/apple-touch-icon-72x72.png"/>
<link rel="apple-touch-icon" sizes="114x114"
      href="/assets/images/apple-touch-icon-114x114.png"/>
<link rel="apple-touch-icon" sizes="144x144"
      href="/assets/images/apple-touch-icon-144x144.png"/>
<link rel="stylesheet" href="/_assets/styles.css">


<!-- Social Media tag Starts -->
<!-- Place this data between the <head> tags of your website -->
<!-- Open Graph data -->
<meta property="og:title" content=""/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="https://www.kotlincn.net/docs/tutorials/native/mpp-ios-android.html"/>
<meta property="og:image" content="https://www.kotlincn.net/assets/images/open-graph/kotlin_250x250.png"/>
    <meta property="og:description" content="在 iOS 与 Android 之间共享 Kotlin 代码">
<meta property="og:site_name" content="Kotlin"/>

<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@kotlin">
<meta name="twitter:title" content="">
    <meta name="twitter:description" content="在 iOS 与 Android 之间共享 Kotlin 代码">
<meta name="twitter:image:src" content="https://www.kotlincn.net/assets/images/twitter-card/kotlin_800x320.png">
<!-- Social Media tag Ends -->

    <title>多平台项目: iOS 与 Android - Kotlin 语言中文站</title>

    <script src="/_assets/common.js"></script>
    <link rel="stylesheet" href="/_assets/common.css"/>
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5W8DZRW"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<div class="global-layout">

<header class="global-header">
    <div class="global-header-panel">
        <div class="g-layout">
            <a class="global-header-logo" href="/">Kotlin</a>
<nav class="global-nav">
    <div class="nav-links">
            <a href="https://www.kotliner.cn/" class="nav-item">
                博客
            </a>
            <a href="https://discuss.kotliner.cn/" class="nav-item">
                论坛
            </a>
            <a href="/docs/reference/" class="nav-item">
                学习
            </a>
            <a href="/community/" class="nav-item">
                社区
            </a>
            <a href="https://play.kotlinlang.org" class="nav-item">
                在线试用
            </a>
    </div>

    <div class="search-button">
        <div class="icon"></div>
    </div>
</nav>        </div>
    </div>


    <div class="g-layout">
    </div>
</header>
    <div class="g-layout global-content">
        <nav class="docs-nav">
                <div class="nav-item-wrap">
                        <a href="/docs/reference/" class="nav-item">
                            <span class="nav-item-text">
                                参考
                            </span>
                        </a>
                </div>
                <div class="nav-item-wrap">
                        <a href="/docs/tutorials/" class="nav-item is_active">
                            <span class="nav-item-text">
                                教程
                            </span>
                        </a>
                </div>
                <div class="nav-item-wrap">
                        <a href="/docs/books.html" class="nav-item">
                            <span class="nav-item-text">
                                书籍
                            </span>
                        </a>
                </div>
                <div class="nav-item-wrap">
                        <a href="/docs/resources.html" class="nav-item">
                            <span class="nav-item-text">
                                更多资源
                            </span>
                        </a>
                </div>
        </nav>

    <div class="g-grid">
        <aside class="g-3">
            <div class="js-side-tree-nav">
                    <nav class="side-tree-nav">
                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="开始">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">开始</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/getting-started.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">以 IntelliJ IDEA 入门</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/getting-started-eclipse.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">以 Eclipse 入门</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/command-line.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">使用命令行编译器</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/quick-run.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">运行代码片段</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/build-tools.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">使用构建工具</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/koans.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">心印</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/competitive-programming.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">竞技程序设计</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="Android">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">Android</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-android.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Android 开发入门</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/android-plugin.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin Android 扩展</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/android-frameworks.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Android 框架</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="Java 互操作">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">Java 互操作</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/mixing-java-kotlin-intellij.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">在一个项目中混用 Java 与 Kotlin</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="JavaScript">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">JavaScript</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/kotlin-to-javascript/kotlin-to-javascript.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 转 JavaScript</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/getting-started-gradle/getting-started-with-gradle.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">以 Gradle 入门</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/getting-started-idea/getting-started-with-intellij-idea.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">以 IntelliJ IDEA 入门</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/getting-started-maven/getting-started-with-maven.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">以 Maven 入门</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/getting-started-command-line/command-line-library-js.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">使用命令行编译器创建 Kotlin JavaScript 库</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/working-with-modules/working-with-modules.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 与 JavaScript 模块合用</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/working-with-javascript.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">与 JavaScript 合用</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/debugging-javascript/debugging-javascript.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">在浏览器中调试 Kotlin</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="多平台项目">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">多平台项目</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <div class="tree-item-title tree-leaf-title js-item-title js-leaf-title is_active ">
                <div class="marker"></div>
                <div class="text">iOS 与 Android</div>
            </div>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/multiplatform-library.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">多平台库</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="原生">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">原生</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/basic-kotlin-native-app.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">基本 Kotlin/Native 应用程序</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/mapping-primitive-data-types-from-c.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">映射来自 C 语言的原始数据类型</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/mapping-struct-union-types-from-c.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">映射来自 C 语言的结构与联合类型</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/mapping-function-pointers-from-c.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">映射来自 C 语言的函数指针</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/mapping-strings-from-c.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">映射来自 C 语言的字符串</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/dynamic-libraries.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin/Native 开发动态库</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/apple-framework.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin/Native 开发 Apple 框架</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/multiplatform-library.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">发布 Kotlin/Native 库</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/curl.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">在应用中使用 C 语言互操作与 libcurl</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <div class="tree-item-title tree-leaf-title js-item-title js-leaf-title is_active ">
                <div class="marker"></div>
                <div class="text">构建 iOS 与 Android 应用</div>
            </div>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="协程">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">协程</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/coroutines/async-programming.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">异步程序设计</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/coroutines/coroutines-basic-jvm.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">JVM 平台的 Kotlin 协程简介</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="Web 开发">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">Web 开发</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/httpservlets.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">用 Http Servlets 创建 web 应用</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/spring-boot-restful.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">用  Spring Boot 创建 RESTful Web 服务</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="工具">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">工具</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-and-ci.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">TeamCity 配置 Kotlin</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="教学">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">教学</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/edu-tools-learner.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">通过 EduTools 插件学习 Kotlin</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/edu-tools-educator.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">通过 EduTools 插件讲授 Kotlin</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="迁移自 Python">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">迁移自 Python</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/introduction.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">简介</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/hello-world.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Hello World</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/compiling-and-running.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">编译与运行</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/declaring-variables.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">声明变量</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/primitive-data-types-and-their-limitations.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">原生数据类型及其表示范围</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/strings.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">字符串</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/conditionals.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">条件式</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/collections.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">集合</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/loops.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">循环</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/functions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">函数</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/classes.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">类</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/exceptions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">异常</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/null-safety.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">空安全</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/functional-programming.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">函数式编程</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/packages-and-imports.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">包与导入</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/visibility-modifiers.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">可见性修饰符</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/inheritance.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">继承</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/objects-and-companion-objects.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">对象与伴生对象</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/generics.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">泛型</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/extension-functionsproperties.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">扩展函数/属性</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/member-references-and-reflection.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">成员引用与反射</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/annotations.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">注解</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/file-io.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">文件 I/O</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/scoped-resource-usage.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">作用域内资源用法</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/documentation.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">编写文档</span>
            </a>
    </div>

    </div>

    </nav>

            </div>
        </aside>

        <article role="main" class="page-content g-9">
<a href="https://github.com/hltj/kotlin-web-site-cn/edit/master/pages/docs/tutorials/native/mpp-ios-android.md"
   class="page-link-to-github"
   target="_blank"
   title="在 GitHub 上编辑本页">
        <i class="github-icon"></i>
        <span class="text">编辑本页</span>
</a>
            <h1>
                多平台项目: iOS 与 Android
            </h1>
            <table>
                    <tr>
                        <td>
                            <strong>最近更新</strong>
                        </td>
                        <td>
                            2018-10-04
                        </td>
                    </tr>
            </table>
                在 iOS 与 Android 之间共享 Kotlin 代码
                <br/>
                <br/>
            
<p>在本教程中我们将通过创建一个 iOS 与一个 Android 应用，来展示 Kotlin 代码的共享功能。
在 Android 上我们将使用 Kotlin/JVM，而在 iOS 上将是 Kotlin/Native。</p>
<p>我们将学习到如何：</p>
<ul>
<li>使用 Android Studio 创建一个 <a href="#创建一个-Android-工程">Android app</a></li>
<li>创建一个共享的 <a href="#创建共享模块">Kotlin library</a>
<ul>
<li>在 <a href="#在-android-中使用共享代码">Android app</a> 中使用它</li>
<li>运行 <a href="#运行-android-应用程序">Android 应用程序</a></li>
</ul>
</li>
<li>使用 Xcode 创建一个 <a href="#creating-ios-application">iOS app</a>
<ul>
<li>在 <a href="#setting-up-framework-dependency-in-xcode">iOS app</a> 上使用共享的 Kotlin 库</li>
<li>在 <a href="#在-swift-中调用-kotlin-代码">Swift 中使用 Kotlin</a></li>
<li>运行 <a href="#running-the-ios-application">iOS 应用程序</a></li>
</ul>
</li>
</ul>
<p>本教程的目标是展示 Kotlin 共享代码的能力以及它带来的优势。
我们将会看到的是一个简化的应用程序，但这里展示的内容可以用于真实的应用，
而与它的大小或复杂度无关。</p>
<p>我们要创建的应用程序将只在 Android 上显示
<code>Kotlin Rocks on Android</code> 或在 iOS 上显示 <code>Kotlin Rocks on iOS &lt;version&gt;</code>。
我们希望共享生成此消息的代码。</p>
<p>通用的代码是 <code>"Kotlin Rocks on ${platformName()}"</code>，<code>platformName()</code>
是一个使用 <code>expect</code> 关键字声明的函数。而 <code>actual</code> 的实现将根据特定的平台而异。</p>
<h1 id="搭建本地环境">搭建本地环境</h1>
<ul>
<li>
<p>我们将使用 <a href="https://developer.android.com/studio/">Android Studio</a> 来讲解 Android 部分的内容. 
当然也可以使用 <a href="https://jetbrains.com/idea">IntelliJ IDEA</a> 社区版或终级版。</p>
</li>
<li>
<p>IDE 应该安装了 Kotlin 插件 1.3.21 或更高版本。这个可以通过
IDE 的 <em>Settings</em>（或<em>Preferences</em>）中的 <em>Language &amp; Frameworks | Kotlin Updates</em> 部分验证。</p>
</li>
<li>
<p>编译 iOS 以及 macOS 设备的代码需要 masOS 系统。我们需要安装以及配置
<a href="https://developer.apple.com/xcode/">Xcode</a> 工具。查看
<a href="https://developer.apple.com/xcode/">Apple 开发者网站</a> 来获取更多细节。</p>
</li>
</ul>
<p><em>注意：我们将使用 IntelliJ IDEA 2018.3 EAP、Android Studio 3.2、Kotlin 1.3.21、Xcode 10.0、macOS 10.14、Gradle 4.7</em></p>
<h1 id="创建一个-android-工程">创建一个 Android 工程</h1>
<p>我们将通过 <em>Start New Android Project</em> 来创建一个 Android 工程。如果使用 IntelliJ IDEA，我们需要在左边的 <em>New Project</em> 
向导面板中选择 <em>Android</em>。</p>
<p>重要的一点是你需要确保勾选了 <em>Include Kotlin support</em> 选择框。现在我们可以在向导的下一步中<!--
-->保留默认设置。我们接下来选择 <em>Empty Activity</em> 选项并点击 <em>Next</em>，最后点击 <em>Finish</em>。</p>
<p><strong>注意</strong> 如果使用早期发行版或者 EAP 版本的 Kotlin plugin，IDE 在生成工程的时候可能会失败， 
给 Gradle 抛出 <a href="https://youtrack.jetbrains.com/issue/KT-18835#focus=streamItem-27-2718879-0-0">error</a>。
这是因为 <code>build.gradle</code> 文件中没有引用正确的 Maven 库，在每一个 <code>repositories { .. }</code>
块中它可以通过添加来解决以下条目 <em>两次</em>。</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="groovy" theme="idea">
<pre><code class="language-groovy">maven { url 'https://dl.bintray.com/kotlin/kotlin-eap' }
</code></pre>
</div>
<p><a name="gradle-upgrade"></a>
Kotlin/Native 插件需要更新版本的 Gradle，让我们修改 <code>gradle/wrapper/gradle-wrapper.properties</code>
并且使用下面的 <code>distrubutionUrl</code>：</p>
<pre><code>distributionUrl=https\://services.gradle.org/distributions/gradle-4.7-all.zip
</code></pre>
<p>我们需要通过刷新 Gradle Project 来让其接受设置变更。点击 <code>Sync Now</code> 链接或者<!--
-->在 Gradle 根工程的上下文菜单中使用 <em>Gradle</em> 工具窗口并且点击刷新按钮。</p>
<p>此刻，我们应该可以编译并运行这个 Android 应用了。</p>
<h1 id="创建共享模块">创建共享模块</h1>
<p>这部分教程的目标是演示在 Android 与 iOS 之间复用 Kotlin 源码。让我们从在
Gradle 工程中创建一个 <code>SharedCode</code> 子工程开始。<code>SharedCode</code> 工程中的源码<!--
-->将被在两个平台之间共享。
我们将在工程中创建几个新文件来实现这个目标。</p>
<h2 id="添加-kotlin-源码">添加 Kotlin 源码</h2>
<p>我们想要使每个平台都根据平台自身展示相似的文本：<code>Kotlin Rocks on Android</code> 以及
<code>Kotlin Rocks on iOS</code>。我们将复用生成消息的方式。
让我们在 <code>SharedCode/src/commonMain/kotlin/common.kt</code> 下创建一个 main 文件。</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="kotlin" theme="idea">
<pre><code class="language-kotlin">package org.kotlin.mpp.mobile

expect fun platformName(): String

fun createApplicationScreenMessage() : String {
  return "Kotlin Rocks on ${platformName()}"
}

</code></pre>
</div>
<p>这是通用的部分。这段代码生成了最终的消息。它 <code>expect</code> 平台<!--
-->提供来自 <code>expect fun platformName（）：String</code> 函数的平台名称。我们将同时在
Android 与 iOS 应用中使用 <code>createApplicationScreenMessage</code>。</p>
<p>现在，我们需要在 <code>SharedCode/src/androidMain/kotlin/actual.kt</code> 中为 Android 创建相应的实现：</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="kotlin" theme="idea">
<pre><code class="language-kotlin">package org.kotlin.mpp.mobile

actual fun platformName(): String {
  return "Android"
}

</code></pre>
</div>
<p>我们为 iOS 创建了一个相似的文件 <code>SharedCode/src/iosMain/kotlin/actual.kt</code>：</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="kotlin" theme="idea">
<pre><code class="language-kotlin">package org.kotlin.mpp.mobile

import platform.UIKit.UIDevice

actual fun platformName(): String {
  return UIDevice.currentDevice.systemName() +
         " " +
         UIDevice.currentDevice.systemVersion
}
</code></pre>
</div>
<p>这里我们可以使用 Apple UIKit Framework 中的 <a href="https://developer.apple.com/documentation/uikit/uidevice?language=objc">UIDevice</a>
类，这是一个仅仅在 Swift 以及 Objective-C 中使用而在 Java 中没有的类。
Kotlin/Native 编译器带有一组预先导入的框架，所以我们可以无需额外步骤的<!--
-->使用 UIKit Framework。
Objective-C 与 Swift 互操作的细节被包含在这篇<a href="/docs/reference/native/objc_interop.html">文档</a>中</p>
<h2 id="更新-gradle-脚本">更新 Gradle 脚本</h2>
<p><code>SharedCode</code> 应该为我们生成一系列产物：</p>
<ul>
<li>在 <code>androidMain</code> 源集中为 Android 工程生成 JAR 文件</li>
<li>Apple framework
    <ul>
<li>面向 iOS 设备以及 App Store (<code>arm64</code> target)</li>
<li>面向 iOS emulator (<code>x86_64</code> target)</li>
</ul>
</li>
</ul>
<p>让我们更新该 Gradle 脚本。</p>
<p>首先，我们将一个新工程添加到 <code>settings.gradle</code> 文件，只需要将下面这行代码添加到文件末尾：</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="groovy" theme="idea">
<pre><code class="language-groovy">include ':SharedCode'
</code></pre>
</div>
<p>接下来，
我们需要使用下面的内容来创建 <code>SharedCode/build.gradle</code> 文件：</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="groovy" theme="idea">
<pre><code class="language-groovy">apply plugin: 'kotlin-multiplatform'

kotlin {
    targets {
        final def iOSTarget = System.getenv('SDK_NAME')?.startsWith("iphoneos") \
                              ? presets.iosArm64 : presets.iosX64

        fromPreset(iOSTarget, 'ios') {
             binaries {
                framework('SharedCode')
            }
        }

        fromPreset(presets.jvm, 'android')
    }

    sourceSets {
        commonMain.dependencies {
            api 'org.jetbrains.kotlin:kotlin-stdlib-common'
        }

        androidMain.dependencies {
            api 'org.jetbrains.kotlin:kotlin-stdlib'
        }
    }
}

// workaround for https://youtrack.jetbrains.com/issue/KT-27170
configurations {
    compileClasspath
}

</code></pre>
</div>
<h2 id="多平台-gradle-工程">多平台 Gradle 工程</h2>
<p><code>SharedCode/build.gradle</code> 文件使用了 <code>kotlin-multiplatform</code> 插件来实现<!--
-->我们所需的功能。
在这个文件中，我们定义了一些目标：<code>common</code>、<code>android</code> 以及 <code>iOS</code>。 每一个<!--
-->都有它自己的平台。<code>common</code> 目标包含了 Kotlin 的通用代码，
它会被导入每一个平台的编译中。它允许拥有 <code>expect</code> 声明。
其它的目标为 <code>common</code> 目标中的所有 <code>expect</code>-actions 提供了 <code>actual</code> 实现。
关于更多多平台项目的细节说明可以在<!--
--><a href="/docs/reference/building-mpp-with-gradle.html">多平台项目</a>文档页中找到。</p>
<p>让我们用下面的表格总结一下：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>源路径</th>
<th>目标</th>
<th>产物</th>
</tr>
</thead>
<tbody>
<tr>
<td>common</td>
<td><code>SharedCode/commonMain/kotlin</code></td>
<td>-</td>
<td>Kotlin metadata</td>
</tr>
<tr>
<td>android</td>
<td><code>SharedCode/androidMain/kotlin</code></td>
<td>JVM 6</td>
<td><code>.jar</code> file or <code>.class</code> files</td>
</tr>
<tr>
<td>iOS</td>
<td><code>SharedCode/iosMain</code></td>
<td>iOS arm64 or x86_64</td>
<td>Apple framework</td>
</tr>
</tbody>
</table>
<p>现在是时候再次在 Android Studio 中刷新这个 Gradle 工程了。在黄色条目上点击 <em>Sync Now</em>
或者在根 Gradle 工程的上下文菜单中使用 <em>Gradle</em> 工具窗口并点击 <code>Refresh</code> 按钮。
现在 <code>:SharedCode</code> 工程应该被 IDE 识别了。</p>
<p>我们已经准备好在我们的 Android 与 iOS 应用中使用 <code>SharedCode</code> 库了。</p>
<h1 id="在-android-中使用共享代码">在 Android 中使用共享代码</h1>
<p>在这部分教程中，我想将 Android 工程的改动降到最低，所以我们在主工程中添加了对
<code>SharedCode</code> 工程的普通依赖。
也可以直接在 Android Gradle 工程中使用 <code>kotlin-multiplatform</code>
插件，来代替 <code>kotlin-android</code> 插件。关于更多信息，请参考<!--
--><a href="/docs/reference/multiplatform.html">多平台项目</a>文档。</p>
<p>让我们将对 <code>SharedCode</code> 工程的依赖引入 Android 工程。我们需要修改
<code>app/build.gradle</code> 文件并在 <code>dependencies { .. }</code> 块中引入下面这行代码：</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="groovy" theme="idea">
<pre><code class="language-groovy">    implementation project(':SharedCode')
</code></pre>
</div>
<p>我们需要<!--
-->给 <code>TextView</code> 指定 <code>id</code> 以用来在我们控制它的 activity 的代码中访问它。
让我们修改
<code>app/src/main/res/layout/activity_main.xml</code> 文件<!--
-->（如果我们在新项目向导中更改了名称，则名称可能会有所不同）
并且为 <code>&lt;TextView&gt;</code> 元素添加几个更多的属性：</p>
<pre><code>        android:id="@+id/main_text"
        android:textSize="42sp"
        android:layout_margin="5sp"
        android:textAlignment="center"
</code></pre>
<p>接下来，让我们在 <code>/app/src/main/java/&lt;package&gt;/MainActivity.kt</code> 文件的 <code>MainActivity</code>
类中将下面这行代码添加到
<code>onCreate</code> 方法的末尾：</p>
<pre><code>findViewById&lt;TextView&gt;(R.id.main_text).text = createApplicationScreenMessage()
</code></pre>
<p>使用 IDE 中的联想功能来引入缺少的导入行：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">import org.kotlin.mpp.mobile.createApplicationScreenMessage
</code></pre>
<p>到类似的文件中。</p>
<p>现在我们拥有一个 <code>TextView</code>，它将使用可共享的代码函数 <code>createApplicationScreenMessage()</code>
为我们展示文本。它将显示 <code>Kotlin Rocks on Android</code>。
让我们看看它是如何工作的。</p>
<h2 id="运行-android-应用程序">运行 Android 应用程序</h2>
<p>让我们点击 <code>App</code> 运行配置<!--
-->来让我们的项目在真正的 Android 设备或模拟器上运行。</p>
<p><img alt="Start the Application" src="/assets/images/tutorials/native/mpp-ios-android/studio-start-app.png"/></p>
<p>现在我们可以看到应用程序运行在 Android 模拟器上。</p>
<p><img alt="Emulator App" src="/assets/images/tutorials/native/mpp-ios-android/android-emulator-kotlin-rocks-android.png" width="30%"/></p>
<h1 id="creating-ios-application">Creating iOS Application</h1>
<p>We open Xcode and select <em>Create a new Xcode project</em> option. In 
the dialog, we choose the iOS target and select the <em>Single View App</em>. Fill the next page with defaults, 
and use the <code>KotlinIOS</code> (or something else) as the <em>Product Name</em>. Let's select Swift as the language (it is possible to use
Objective-C too). We should instruct Xcode to place the project into the <code>native</code> folder under our project, later we
will use relative paths in the configuration files.</p>
<p>The created iOS application is ready to run on the iOS emulator or on the iOS device. The device run
may require an Apple developer account and to issue a developer certificate. Xcode does its
best to guide us through the process.</p>
<p>Let's make sure we can run the application on the iPhone emulator or device.</p>
<h1 id="setting-up-framework-dependency-in-xcode">Setting up Framework Dependency in Xcode</h1>
<p>The <code>SharedCode</code> build generates iOS frameworks for use with the Xcode project.
All frameworks are in the <code>SharedCode/build/bin</code> folder. 
It creates a <em>debug</em> and <em>release</em> version for every framework target.
The frameworks are in the following paths:</p>
<pre><code>SharedCode/build/bin/iOS/main/debug/framework/SharedCode.framework
SharedCode/build/bin/iOS/main/release/framework/SharedCode.framework
</code></pre>
<p>We use the condition in the Gradle script to select the target platform for the framework.
It is either <code>iOS arm64</code> or <code>iOS x86_64</code> depending on environment variables.</p>
<h2 id="tuning-the-gradle-build-script">Tuning the Gradle Build Script</h2>
<p>We need to supply the right Framework out of those four depending on the selected target in the Xcode
project. It depends on the target configuration selected in Xcode. Also,
we'd like to make Xcode compile the Framework for us before the build.
We need to include the additional task to the end of the <code>SharedCode/build.gradle</code> Gradle file:</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="groovy" theme="idea">
<pre><code class="language-groovy">task packForXCode(type: Sync) {
    final File frameworkDir = new File(buildDir, "xcode-frameworks")
    final String mode = project.findProperty("XCODE_CONFIGURATION")?.toUpperCase() ?: 'DEBUG'
    final def framework = kotlin.targets.ios.binaries.getFramework("SharedCode", mode)

    inputs.property "mode", mode
    dependsOn framework.linkTask

    from { framework.outputFile.parentFile }
    into frameworkDir

    doLast {
        new File(frameworkDir, 'gradlew').with {
            text = "#!/bin/bash\nexport 'JAVA_HOME=${System.getProperty("java.home")}'\ncd '${rootProject.rootDir}'\n./gradlew \$@\n"
            setExecutable(true)
        }
    }
}
tasks.build.dependsOn packForXCode
</code></pre>
</div>
<p>Note, the task may not work <a href="https://github.com/gradle/gradle/issues/6330">correctly</a>
if you use Gradle older than 4.10. 
In this tutorial we have already <a href="#gradle-upgrade">upgraded it to 4.7</a>.</p>
<p>Let's switch back to the Android Studio and execute the <code>build</code> target of the <code>SharedCode</code> project from
the <em>Gradle</em> tool window. The task looks for environment variables set by the Xcode build and copies
the right variant of the framework into the <code>SharedCode/build/xcode-frameworks</code> folder. We then include the
framework from that folder into the build</p>
<h2 id="setting-up-xcode">Setting up Xcode</h2>
<p>We add the <code>SharedCode</code> framework to the Xcode project.
For that let's click on the root node of the <em>project navigator</em> and select the <em>target</em> settings.
Next, we click on the <code>+</code> in the <em>Embedded Binaries</em> section, click <em>Add Other…</em> button in the dialog
to choose the framework from the disk. We can point to the following folder:</p>
<pre><code>SharedCode/build/xcode-frameworks/SharedCode.framework
</code></pre>
<p>We will then see something similar to this: 
<img alt="Xcode General Screen" src="/assets/images/tutorials/native/mpp-ios-android/xcode-general.png"/></p>
<p>Now we need to explain to Xcode, where to look for frameworks. We need to add the <em>relative</em> path 
<code>$(SRCROOT)/../../SharedCode/build/xcode-frameworks</code> into the <em>Search Paths | Framework Search Paths</em> section.
Open the <em>Build Settings</em> tab again, pick the <em>All</em> sub-tab below, and type the <em>Framework Search Paths</em> into
the search field to easily find the option.
Xcode will then show the substituted path in the UI for it.</p>
<p><img alt="Xcode Build Settings" src="/assets/images/tutorials/native/mpp-ios-android/xcode-search-path.png"/></p>
<p>The final step is to make Xcode call our Gradle build to prepare the <code>SharedCode</code> framework before each run.
We open the <em>Build Phases</em> tab and click <code>+</code> to add the <em>New Run Script Phase</em> and add the following code into it:</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="bash" theme="idea">
<pre><code class="language-bash">cd "$SRCROOT/../../SharedCode/build/xcode-frameworks"
./gradlew :SharedCode:packForXCode -PXCODE_CONFIGURATION=${CONFIGURATION}
</code></pre>
</div>
<p>Note, here we use the <code>$SRCROOT/../..</code> as the path to the root of our Gradle project.
It can depend on the way the Xcode project was created. Also, we use the generated
<code>SharedCode/build/xcode-frameworks/gradlew</code> script,
the <code>packForXCode</code> task generates it. We assumed that the Gradle build is executed at least once,
before opening the Xcode project on a fresh machine</p>
<p><img alt="Xcode Build Phases" src="/assets/images/tutorials/native/mpp-ios-android/xcode-run-script.png"/></p>
<p>We should drag the created build phase to the top of the list</p>
<p><img alt="Xcode Build Phases" src="/assets/images/tutorials/native/mpp-ios-android/xcode-run-script-order.png"/></p>
<p>We are now ready to start coding the iOS application and to use the Kotlin code from it</p>
<h2 id="在-swift-中调用-kotlin-代码">在 Swift 中调用 Kotlin 代码</h2>
<p>Remember, our goal is to show the text message on the screen. As we see, our iOS application does not draw
anything on the screen. Let's make it show the <code>UILabel</code> with the text message. 
We need to replace the contents
of the <code>ViewController.swift</code> file with the following code:</p>
<div auto-indent="false" class="sample" data-highlight-only="1" mode="swift" theme="idea">
<pre><code class="language-swift">import UIKit
import SharedCode

class ViewController: UIViewController {
    override func viewDidLoad() {
        super.viewDidLoad()
        
        let label = UILabel(frame: CGRect(x: 0, y: 0, width: 300, height: 21))
        label.center = CGPoint(x: 160, y: 285)
        label.textAlignment = .center
        label.font = label.font.withSize(25)
        label.text = CommonKt.createApplicationScreenMessage()
        view.addSubview(label)
    }
}

</code></pre>
</div>
<p>We use the <code>import SharedCode</code> to import our Framework, which we compiled with Kotlin/Native from Kotlin code.
Next, we call the Kotlin function from it as <code>CommonKt.createApplicationScreenMessage()</code>. Follow the 
<a href="/docs/tutorials/native/apple-framework.html">Kotlin/Native as an Apple Framework</a> tutorial for
more details on the Kotlin/Native to Swift (or Objective-C) interop.</p>
<p>Right now, we are ready to start the application in the emulator or on an iOS device.</p>
<h2 id="running-the-ios-application">Running the iOS Application</h2>
<p>Let's click the <em>Run</em> button in Xcode, and we'll see our application running</p>
<p><img alt="Emulator App" src="/assets/images/tutorials/native/mpp-ios-android/iPhone-emulator-kotlin-rocks.png" width="30%"/></p>
<h1 id="summary">Summary</h1>
<p>In the tutorial we:</p>
<ul>
<li>created an Android application in Android Studio</li>
<li>created an iOS application in Xcode</li>
<li>added Kotlin multiplatform sub-project
    <ul>
<li>with shared Kotlin code</li>
<li>compiled it to Android Jar</li>
<li>compiled it to iOS Framework</li>
</ul>
</li>
<li>put it all together and re-used Kotlin code</li>
</ul>
<p>We may find the whole sources from that tutorial on <a href="https://github.com/JetBrains/kotlin-examples/tree/master/tutorials/mpp-iOS-Android">GitHub</a>.</p>
<h1 id="next-steps">Next Steps</h1>
<p>This is only the beginning and a small example of Kotlin code sharing
between iOS and Android (and other platforms) with Kotlin, Kotlin/Native
and Kotlin multiplatform projects. The same approach works for real applications,
independent of their size or complexity.</p>
<p>Kotlin/Native interop with Swift and Objective-C is covered in the
<a href="/docs/reference/native/objc_interop.html">documentation</a> article. Also,
the same topic is covered in the <a href="apple-framework.html">Kotlin/Native as an Apple Framework</a>
tutorial.</p>
<p>The multiplatform projects and multiplatform libraries are discussed in the <a href="/docs/reference/multiplatform.html">documentation</a> too.</p>
<p>Sharing code between platforms is a powerful technique, but it may be hard to
accomplish without rich APIs that we have in Android, JVM, or iOS platforms.
Multiplatform libraries can be used to fix that. They bring rich APIs
directly in the common Kotlin code. There are several examples of such libraries:</p>
<ul>
<li><a href="https://github.com/Kotlin/kotlinx.coroutines/blob/master/native/README.md">kotlinx.coroutines</a></li>
<li><a href="https://github.com/Kotlin/kotlinx-io">kotlinx.io</a></li>
<li><a href="https://github.com/Kotlin/kotlinx.serialization">kotlinx.serialization</a></li>
<li><a href="https://ktor.io/">ktor</a></li>
<li><a href="https://ktor.io/clients/http-client.html">ktor-http-client</a></li>
</ul>
<p>Looking for more APIs? It is easy to create a <a href="/docs/tutorials/multiplatform-library.html">multiplatform library</a> and share it!</p>

        </article>
    </div>
    </div>

</div>

<footer role="contentinfo" class="global-footer">

    <div class="global-footer-terms">
        <div class="g-layout">

            <div class="global-footer-container">
                <div class="global-footer-row">
                    <div class="terms-copyright">
                        采用 <a href="https://github.com/JetBrains/kotlin-web-site/blob/master/LICENSE">Apache
                        2
                        授权许可</a>
                    </div>

                    <div class="terms-foundation">
                        Kotlin 商标受 <a
                            href="/foundation/kotlin-foundation.html">Kotlin 基金会</a>保护
                    </div>
                    <a class="terms-kit"
                            href=/assets/kotlin-media-kit.zip>宣传资料</a>
                </div>
                <div class="global-footer-row">
                    <div class="terms-sponsor">
                        由 <a href="http://jetbrains.com" class="sponsor sponsor_jetbrains"
                                                      target="_blank">JetBrains</a> 赞助及开发；
                        由<a href="https://hltj.me/" class="testimonial-company-link" target="_blank" rel="nofollow">灰蓝天际</a>、<a href="http://tanfujun.com" class="testimonial-company-link" target="_blank" rel="nofollow">晓_晨DEV</a> &nbsp;<a href="/contribute.html#中文站翻译贡献者" class="testimonial-company-link" target="_blank" rel="nofollow">等</a>译
                    </div>
                </div>

            </div>
        </div>
    </div>

</footer>
    <script src="/_assets/tutorial.js"></script>
    <link rel="stylesheet" href="/_assets/tutorial.css">
<div class="search-popup _hidden" tabindex="1000">
    <div class="search-popup__content">
        <div class="search-popup__controls">
            <div class="search-popup__input"></div>
            <div class="search-popup__close">
                <div class="search-popup__close-icon-wrapper">
                    <div class="search-popup__close-icon"></div>
                </div>
                <div class="search-popup__close-text">esc</div>
            </div>
        </div>
        <div class="search-popup__results"></div>
    </div>
</div></body>
</html>