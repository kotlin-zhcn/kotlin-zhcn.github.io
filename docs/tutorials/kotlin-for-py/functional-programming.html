<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=1000, initial-scale=1">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5W8DZRW');</script>
<!-- End Google Tag Manager -->

<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="dns-prefetch" href="//fonts.gstatic.com">
<link rel="dns-prefetch" href="//resources.jetbrains.com">


<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<link rel="Shortcut Icon" href="/assets/images/favicon.ico" type="image/x-icon"/>
<link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png"/>
<link rel="apple-touch-icon" sizes="72x72"
      href="/assets/images/apple-touch-icon-72x72.png"/>
<link rel="apple-touch-icon" sizes="114x114"
      href="/assets/images/apple-touch-icon-114x114.png"/>
<link rel="apple-touch-icon" sizes="144x144"
      href="/assets/images/apple-touch-icon-144x144.png"/>

<link rel="stylesheet" href="/_assets/styles.css?&amp;v=0c4ac5f64392e521edee1f0616eea4b8">

<!-- Social Media tag Starts -->
<!-- Place this data between the <head> tags of your website -->
<!-- Open Graph data -->
<meta property="og:title" content=""/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="https://www.kotlincn.net/docs/tutorials/kotlin-for-py/functional-programming.html"/>
<meta property="og:image" content="https://www.kotlincn.net/assets/images/open-graph/kotlin_250x250.png"/>
    <meta property="og:description" content="">
<meta property="og:site_name" content="Kotlin"/>

<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@kotlin">
<meta name="twitter:title" content="">
    <meta name="twitter:description" content="">
<meta name="twitter:image:src" content="https://www.kotlincn.net/assets/images/twitter-card/kotlin_800x320.png">
<!-- Social Media tag Ends -->    <link rel="stylesheet" href="/_assets/tutorial.css?&amp;v=a6c486ad37c6933d0d81815ecf50d9c6">


    <title>函数式编程 - Kotlin 语言中文站</title>

    <link rel="stylesheet" href="/_assets/common.css?&amp;v=9e6fbfc1663315f135a0fd5e146c021a"/>
</head>
<body class="">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5W8DZRW"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<div class="global-layout">

    <div class="global-header-panel banner-nav">
        <div class="g-layout">
<div class="global-nav banner-container">
    <a class="banner-text" href="https://item.jd.com/12898592.html" target="_blank">
        <div class="banner-item title">
            新书上架：《深入理解Kotlin协程》（中文社区负责人霍丙乾著）
        </div>
        <div class="banner-item underline">
            立即购买
        </div>
    </a>
    <div class="close-head-banner"></div>
</div>        </div>
    </div>
<header class="global-header">
    <div class="global-header-panel">
        <div class="g-layout">
            <a class="global-header-logo" href="/">Kotlin</a> <a href="https://github.com/JetBrains/kotlin/releases/tag/v1.3.72" target="_blank" class="global-header-logo__version">1.3.72</a>
<nav class="global-nav">
    <div class="nav-links">
            <a href="https://www.kotliner.cn/" class="nav-item  nav-item-external" target="_blank" >
                博客
            </a>
            <a href="https://discuss.kotliner.cn/" class="nav-item  nav-item-external" target="_blank" >
                论坛
            </a>
            <a href="/docs/reference/" class="nav-item ">
                学习
            </a>
            <a href="/community/" class="nav-item ">
                社区
            </a>
            <a href="https://play.kotlinlang.org" class="nav-item  nav-item-external" target="_blank" >
                演练
            </a>
    </div>
    <div class="search-button">
        <div class="icon"></div>
    </div>
</nav>        </div>
    </div>
</header>        <div class="g-layout global-content">
        <nav class="docs-nav">
                <div class="nav-item-wrap">
                        <a href="/docs/reference/" class="nav-item">
                            <span class="nav-item-text">
                                语言指南
                            </span>
                        </a>
                </div>
                <div class="nav-item-wrap">
                        <a href="/docs/tutorials/" class="nav-item is_active">
                            <span class="nav-item-text">
                                教程
                            </span>
                        </a>
                </div>
                <div class="nav-item-wrap">
                        <a href="/docs/books.html" class="nav-item">
                            <span class="nav-item-text">
                                图书
                            </span>
                        </a>
                </div>
        </nav>

    <div class="g-grid">
        <aside class="g-3">
            <div class="js-side-tree-nav">
                    <nav class="side-tree-nav">
                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="开始">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">开始</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/getting-started.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 入门</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/jvm-get-started.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">以 IntelliJ IDEA 入门</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/getting-started-eclipse.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">以 Eclipse 入门</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/command-line.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">使用命令行编译器</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/quick-run.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">运行代码片段</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/build-tools.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">使用构建工具</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/koans.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">心印</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/competitive-programming.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">竞技程序设计</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="Java 互操作">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">Java 互操作</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/mixing-java-kotlin-intellij.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">在一个项目中混用 Java 与 Kotlin</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="JavaScript">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">JavaScript</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/setting-up.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">搭建一个项目</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/running-kotlin-js.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">运行 Kotlin/JS</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/dev-server-continuous-compilation.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">开发服务器与持续编译</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/using-packages-from-npm.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">使用来自 npm 的包</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/debugging-kotlin-in-browser.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">在浏览器中调试 Kotlin</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/running-tests.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">运行测试</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/browser-api-dom.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">浏览器 API 与 DOM</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/typesafe-html-dsl.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">类型安全的 HTML DSL</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/working-with-modules/working-with-modules.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 与 JavaScript 模块合用</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/javascript/react-and-kotlin-js.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">用 React 与 Kotlin/JS 构建 Web 应用程序</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="多平台项目">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">多平台项目</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/mpp/intro-to-kotlin-mpp.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">多平台项目简介</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/mpp-ios-android.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">iOS 与 Android</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/mpp/multiplatform-library.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">多平台库</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="原生">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">原生</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/using-command-line-compiler.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">使用命令行编译器的 Hello Kotlin/Native</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/using-gradle.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">使用 Gradle 的 Hello Kotlin/Native</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/using-intellij-idea.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">使用 IntelliJ IDEA 的 Hello Kotlin/Native</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/intro-to-kotlin-native.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">在 Kotlin/Native 中创建 HTTP 客户端</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/mapping-primitive-data-types-from-c.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">映射来自 C 语言的原始数据类型</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/mapping-struct-union-types-from-c.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">映射来自 C 语言的结构与联合类型</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/mapping-function-pointers-from-c.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">映射来自 C 语言的函数指针</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/mapping-strings-from-c.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">映射来自 C 语言的字符串</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/dynamic-libraries.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin/Native 开发动态库</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/apple-framework.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin/Native 开发 Apple Framework</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/mpp/multiplatform-library.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">发布 Kotlin/Native 库</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/curl.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">在应用中使用 C 语言互操作与 libcurl</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/native/mpp-ios-android.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">构建 iOS 与 Android 应用</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="协程">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">协程</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/coroutines/async-programming.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">异步程序设计</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/coroutines/coroutines-basic-jvm.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">JVM 平台的 Kotlin 协程简介</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/coroutines/intro-to-coroutines-and-channels.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">协程与通道简介</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="Web 开发">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">Web 开发</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/httpservlets.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">用 Http Servlets 创建 web 应用</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/spring-boot-restful.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">用  Spring Boot 创建 RESTful Web 服务</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="工具">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">工具</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-and-ci.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">TeamCity 配置 Kotlin</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="教学">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">教学</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/edu-tools-learner.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">通过 EduTools 插件学习 Kotlin</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/edu-tools-educator.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">通过 EduTools 插件讲授 Kotlin</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="迁移自 Python">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">迁移自 Python</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/introduction.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">简介</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/hello-world.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Hello World</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/compiling-and-running.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">编译与运行</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/declaring-variables.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">声明变量</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/primitive-data-types-and-their-limitations.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">原生数据类型及其表示范围</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/strings.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">字符串</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/conditionals.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">条件式</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/collections.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">集合</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/loops.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">循环</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/functions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">函数</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/classes.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">类</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/exceptions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">异常</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/null-safety.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">空安全</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <div class="tree-item-title tree-leaf-title js-item-title js-leaf-title is_active ">
                <div class="marker"></div>
                <div class="text">函数式编程</div>
            </div>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/packages-and-imports.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">包与导入</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/visibility-modifiers.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">可见性修饰符</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/inheritance.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">继承</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/objects-and-companion-objects.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">对象与伴生对象</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/generics.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">泛型</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/extension-functionsproperties.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">扩展函数/属性</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/member-references-and-reflection.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">成员引用与反射</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/annotations.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">注解</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/file-io.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">文件 I/O</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/scoped-resource-usage.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">作用域内资源用法</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="/docs/tutorials/kotlin-for-py/documentation.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">编写文档</span>
            </a>
    </div>

    </div>

    </nav>

            </div>
        </aside>

        <article role="main" class="page-content g-9">
<a href="https://github.com/hltj/kotlin-for-python-developers-cn/edit/master/README.md"
   class="page-link-to-github"
   target="_blank"
   title="在 GitHub 上编辑本页">
        <i class="github-icon"></i>
        <span class="text">改进翻译</span>
</a>
            <h1>
                函数式编程
            </h1>
            <table>
            </table>
            
<h2 id="函数类型">函数类型</h2>
<p>像在 Python 中一样，Kotlin 中的函数是一等值——它们可以分配给变量并作为参数传递。函数的类型是 <em>function type</em>，用括号括起来的参数类型列表和返回类型的箭头指示。参考以下函数：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">fun safeDivide(numerator: Int, denominator: Int) =
    if (denominator == 0) 0.0 else numerator.toDouble() / denominator
</code></pre>
</div>
<p>它带有两个 <code>Int</code> 参数并返回 <code>Double</code>，因此其类型为 <code>(Int, Int) -&gt; Double</code>。可以通过在函数名称前加上 <code>::</code> 来引用函数本身，并且可以将其分配给变量（通常会推断出其类型，但为了演示将显示类型签名）：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val f: (Int, Int) -&gt; Double = ::safeDivide
</code></pre>
</div>
<p>当具有函数类型的变量或参数（有时称为 <em>函数引用</em>）时，可以像调用普通函数一样对其进行调用，这将导致引用的函数被调用：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val quotient = f(3, 0)
</code></pre>
</div>
<p>类有可能像执行接口一样实现函数类型。然后，它必须提供一个具有给定签名的称为 <code>invoke</code> 的运算符函数，然后可以将该类的实例分配给该函数类型的变量：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">class Divider : (Int, Int) -&gt; Double {
    override fun invoke(numerator: Int, denominator: Int): Double = ...
}
</code></pre>
</div>
<h2 id="函数字面值lambda-表达式与匿名函数">函数字面值：lambda 表达式与匿名函数</h2>
<p>像在 Python 中一样，可以编写 <em>lambda 表达式</em>：使用非常紧凑的语法声明并编写匿名函数，它计算可调用函数对象的值。在 Kotlin 中，lambdas 可以包含多个语句，这使得它们对于比 Python 的单表达式 lambdas 在处理<a href="functional-programming.html#接收者">更复杂的任务</a>时更有用。最后一个语句必须是一个表达式，它的结果将成为 lambda 的返回值（除非 <code>Unit</code> 是 lambda 表达式所赋值的变量或参数的返回类型，在这种情况下，lambda 没有返回值）。一个 lambda 表达式包含在花括号中，它首先列出了它的参数名和可能的类型（除非可以从上下文中推断出类型）：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val safeDivide = { numerator: Int, denominator: Int -&gt;
    if (denominator == 0) 0.0 else numerator.toDouble() / denominator
}
</code></pre>
</div>
<p><code>safeDivide</code> 的类型是 <code>(Int, Int) -&gt; Double</code>。请注意，与函数类型声明不同，lambda 表达式的参数列表不得包含在括号中。</p>
<p>请注意，Kotlin 中花括号的其他用法（例如在函数和类定义中以及在 <code>if</code>、<code>else</code>、<code>for</code>、<code>while</code> 语句之后）不是 lambda 表达式（因此，<code>if</code> 是有条件地执行 lambda 函数的函数的情况 <em>并非</em> 如此）。</p>
<p>Lambda 表达式的返回类型是根据其中的最后一个表达式的类型（或从 Lambda 表达式所分配给的变量或参数的函数类型）推断出来的。如果将 lambda 表达式作为函数参数（通常使用）传递或分配给具有声明类型的变量，则 Kotlin 也可以推断参数类型，只需要指定其名称即可：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val safeDivide: (Int, Int) -&gt; Double = { numerator, denominator -&gt;
    if (denominator == 0) 0.0 else numerator.toDouble() / denominator
}
</code></pre>
</div>
<p>或：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">fun callAndPrint(function: (Int, Int) -&gt; Double) {
    println(function(2, 0))
}

callAndPrint({ numerator, denominator -&gt;
    if (denominator == 0) 0.0 else numerator.toDouble() / denominator
})
</code></pre>
</div>
<p>无参数 lambda 不需要箭头。单参数 lambda 可以选择省略参数名称和箭头，在这种情况下，该参数可通过 <code>it</code> 调用：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val square: (Double) -&gt; Double = { it * it }
</code></pre>
</div>
<p>如果函数的最后一个参数的类型是函数类型，并且您想提供 lambda 表达式，则可以将 lambda 表达式放在参数括号之外。如果 lambda 表达式是唯一的参数，则可以完全省略括号。这对于<a href="functional-programming.html#接收者">构建 DSL</a> 非常有用。</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">fun callWithPi(function: (Double) -&gt; Double) {
    println(function(3.14))
}

callWithPi { it * it }
</code></pre>
</div>
<p>如果想更清楚地了解创建函数的事实，可以创建一个 <em>匿名函数</em>，该函数仍然是表达式而不是声明：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">callWithPi(fun(x: Double): Double { return x * x })
</code></pre>
</div>
<p>或：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">callWithPi(fun(x: Double) = x * x)
</code></pre>
</div>
<p>Lambda 表达式和匿名函数统称为 <em>函数字面值</em>。</p>
<h2 id="集合推导">集合推导</h2>
<p>Kotlin 可以非常接近 Python 的 <code>list</code>、<code>dict</code>、<code>set</code> 理解的紧凑性。假设 <code>people</code> 是具有 <code>name</code> 属性的 <code>Person</code> 对象的集合：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val shortGreetings = people
    .filter { it.name.length &lt; 10 }
    .map { "Hello, ${it.name}!" }
</code></pre>
</div>
<p>相当于</p>
<div class="sample" mode="python" theme="idea">
<pre><code class="language-python">short_greetings = [
    f"Hello, {p.name}"  # In Python 2, this would be: "Hello, %s!" % p.name
    for p in people
    if len(p.name) &lt; 10
]
</code></pre>
</div>
<p>在某些方面，这更易于阅读，因为操作是按照它们应用于值的顺序指定的。结果将是一个不变的 <code>List&lt;T&gt;</code>，其中 <code>T</code> 是使用的转换（在这种情况下为 <code>String</code>）生成的任何类型。如果需要可变列表，请在最后调用 <code>toMutableList()</code>。如果需要 Set，请在最后调用 <code>toSet()</code> 或 <code>toMutableSet()</code>。如果要将 Set 转换为 Map，请调用 <code>associateBy()</code>，它需要两个 lambda，用于指定如何从每个元素提取键和值：<code>people.associateBy({it.ssn}, {it.name})</code>（如果希望整个元素作为值，则可以省略第二个 lambda；如果希望结果可变，则可以在最后调用 <code>toMutableMap()</code>）。</p>
<p>这些转换也可以应用于 <code>Sequence&lt;T&gt;</code>，它与 Python 的生成器类似，并且允许进行惰性求值。如果有一个庞大的列表，并且想要延迟处理它，则可以在其上调用 <code>asSequence()</code>。</p>
<p><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/index.html"><code>kotlin.collections</code> 包</a>中提供了大量功能编程风格的操作。</p>
<h2 id="接收者">接收者</h2>
<p>成员函数或<a href="extension-functionsproperties.html">扩展函数</a>的签名始于 <em>接收者</em>：可以在其上调用函数的类型。例如，<code>toString()</code> 的签名是 <code>Any.() -&gt; String</code>——可以在任何非空对象（接收者）上调用它，它不带任何参数，并且返回 <code>String</code>。可以使用这样的签名来编写 lambda 函数——这被称为 <em>带有接收者的函数字面值</em>，对于构建DSL非常有用。</p>
<p>带接收者的函数文字可能最容易被认为是 lambda 表达式形式的扩展函数。该声明看起来像一个普通的 lambda 表达式。使其成为接收者的是上下文——必须将其传递给以接收者作为参数的函数，或者将其分配给类型为接收者的函数类型的变量或属性。将函数与接收者一起使用的唯一方法是在接收者类的实例上调用它，就像它是成员函数或扩展函数一样。例如：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">class Car(val horsepowers: Int)

val boast: Car.() -&gt; String = { "I'm a car with $horsepowers HP!"}

val car = Car(120)
println(car.boast())
</code></pre>
</div>
<p>在带有接收者的 lambda 表达式中，您可以使用 <code>this</code> 来引用接收者对象（在本例中为 <code>car</code>）。像往常一样，如果没有命名冲突，则可以省略 <code>this</code>，这就是为什么可以简单地说 <code>$horsepowers</code> 而不是 <code>${this.horsepowers}</code> 的原因。因此请注意，在 Kotlin 中，<code>this</code> 取决于上下文可能具有不同的含义：如果在内部（可能嵌套的）lambda 表达式与接收者一起使用，它指的是最内部包含接收者的 lambda 表达式的接收者对象。如果需要“突破”函数文字并获取“原始”<code>this</code>（正在其中执行的成员函数的实例），请在 <code>this@</code> 之后提及包含的类名——如果在函数字面量内，而接收方在 Car 的成员函数内，请使用 <code>this@Car</code>。</p>
<p>与其他函数字面值一样，如果函数采用一个参数（调用该参数的接收方对象除外），则除非您声明另一个名称，否则单个参数将隐式称为 <code>it</code>。如果使用多个参数，则必须声明其名称。</p>
<p>这是一个用于构建树形结构的小型 DSL 示例：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">class TreeNode(val name: String) {
    val children = mutableListOf&lt;TreeNode&gt;()

    fun node(name: String, initialize: (TreeNode.() -&gt; Unit)? = null) {
        val child = TreeNode(name)
        children.add(child)
        if (initialize != null) {
            child.initialize()
        }
    }
}

fun tree(name: String, initialize: (TreeNode.() -&gt; Unit)? = null): TreeNode {
    val root = TreeNode(name)
    if (initialize != null) {
        root.initialize()
    }
    return root
}

val t = tree("root") {
    node("math") {
        node("algebra")
        node("trigonometry")
    }
    node("science") {
        node("physics")
    }
}
</code></pre>
</div>
<p>在 <code>tree("root")</code> 之后的块是带有接收者的第一个函数字面值，它将作为 <code>initialize</code> 参数传递给 <code>tree()</code>。根据 <code>tree()</code> 的参数列表，接收者的类型为 <code>TreeNode</code>，因此，<code>tree()</code> 可以在 <code>root</code> 上调用 <code>initialize()</code>。然后，<code>root</code> 在该 lambda 表达式的范围内变为 <code>this</code>，因此，当调用 <code>node("math")</code> 时，它隐式地表示为 <code>this.node("math")</code>，其中 <code>this</code> 与 <code>root</code> 所指的是相同的 <code>TreeNode</code>。下一个块传递给 <code>TreeNode.node()</code>，并在 <code>root</code> 节点的第一个子节点上调用，即 <code>math</code>，在其内部，<code>this</code> 将引用 <code>math</code>。</p>
<p>如果想在 Python 中表达相同的内容，它将看起来像这样，而 lambda 函数只能包含一个表达式将会受阻，所以需要显式的函数定义来处理除单行之外的所有内容</p>
<div class="sample" mode="python" theme="idea">
<pre><code class="language-python">class TreeNode:
    def __init__(self, name):
        self.name = name
        self.children = []

    def node(self, name, initialize=None):
        child = TreeNode(name)
        self.children.append(child)
        if initialize:
            initialize(child)

def tree(name, initialize=None):
    root = TreeNode(name)
    if initialize:
        initialize(root)
    return root

def init_root(root):
    root.node("math", init_math)
    root.node("science",
              lambda science: science.node("physics"))

def init_math(math):
    math.node("algebra")
    math.node("trigonometry")

t = tree("root", init_root)
</code></pre>
</div>
<p>官方文档还有一个非常酷的示例，其中包含<a href="https://www.kotlincn.net/docs/reference/type-safe-builders.html">用于构造 HTML 文档的 DSL</a>。</p>
<h2 id="内联函数">内联函数</h2>
<p>Lambda 函数有一些运行时开销：它们实际上是对象，因此必须实例化，并且（与其他函数一样）调用它们也需要一点时间。如果在函数上使用 <code>inline</code> 关键字，则会告诉编译器内联函数和其 lambda 参数（如果有的话）——也就是说，编译器会将函数的代码（及其 lambda 参数）复制到每个调用站点中，这样就消除了 lambda 实例化以及函数和 lambda 调用的开销。这将无条件地发生，这与 C 和 C++ 中的 <code>inline</code> 更多地是对编译器的提示不同。这将导致已编译代码的大小增加，但是对于某些较小但经常调用的函数可能值得这样做。</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">inline fun time(action: () -&gt; Unit): Long {
    val start = Instant.now().toEpochMilli()
    action()
    return Instant.now().toEpochMilli() - start
}
</code></pre>
</div>
<p>现在，如果这样做：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val t = time { println("Lots of code") }
println(t)
</code></pre>
</div>
<p>编译器将生成类似以下内容的代码（除了 <code>start</code> 不会与任何其他同名标识符冲突）：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val start = Instant.now().toEpochMilli()
println("Lots of code")
val t = Instant.now().toEpochMilli() - start
println(t)
</code></pre>
</div>
<p>在内联函数定义中，可以在任何函数类型的参数前面使用 <code>noinline</code> 来防止将要传递给它的 lambda 内联。</p>
<h2 id="不错的工具函数">不错的工具函数</h2>
<h3 id="runlet-与-with"><code>run()</code>、<code>let()</code> 与 <code>with()</code></h3>
<p>如果想在可能为空的东西上调用函数，<code>?.</code> 很好。但是，如果要调用一个采用非空参数的函数，但要为该参数传递的值可能为空怎么办？尝试 <code>run()</code>，它是 <code>Any?</code> 上的扩展函数，该函数以带有接收者的 lambda 作为参数，并在其调用的值上调用它，而用 <code>?.</code> 来调用 <code>run()</code> 仅当该对象非空时才会调用：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val result = maybeNull?.run { functionThatCanNotHandleNull(this) }
</code></pre>
</div>
<p>如果 <code>maybeNull</code> 为空，则不会调用该函数，而 <code>result</code> 为空。否则，它将是 <code>functionThatCanNotHandleNull(this)</code> 的返回值，其中 <code>this</code> 是指 <code>maybeNull</code>。可以使用 <code>?.</code> 链接 <code>run()</code> 调用——如果前一个结果不为空，那么每个 <code>run()</code> 都会调用：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val result = maybeNull
    ?.run { firstFunction(this) }
    ?.run { secondFunction(this) }
</code></pre>
</div>
<p>第一个 <code>this</code> 是指 <code>maybeNull</code>，第二个是 <code>firstFunction()</code> 的结果，<code>result</code> 将是 <code>secondFunction()</code> 的结果（如果 <code>maybeNull</code> 或任何中间结果为空，那么返回空）。</p>
<p><code>run()</code> 的语法变体是 <code>let()</code>，它以普通函数类型而不是带有接收器的函数类型作为参数，因此可能为空的表达式将称为 <code>it</code> 而不是 <code>this</code>。 。</p>
<p>如果有一个需要多次使用的表达式，但是不必为它提供一个变量名并进行空检测，<code>run()</code> 与 <code>let()</code> 都非常有用：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val result = someExpression?.let {
   firstFunction(it)
   it.memberFunction() + it.memberProperty
}
</code></pre>
</div>
<p>还有一个版本是 <code>with()</code>，也可以使用它来避免为表达式提供变量名，但前提是知道其结果不为空：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val result = with(someExpression) {
   firstFunction(this)
   memberFunction() + memberProperty
}
</code></pre>
</div>
<p>在最后一行，在 <code>memberFunction()</code> 与 <code>memberProperty</code> 之前都有一个隐含的<code>this.</code>（如果这些存在于 <code>someExpression</code> 类型）。返回值是最后一个表达式的值。</p>
<h3 id="apply-与-also"><code>apply()</code> 与 <code>also()</code></h3>
<p>如果不关心函数的返回值，但是想进行一个或多个涉及空值的调用，然后继续使用该值，请尝试 <code>apply()</code>，它返回被调用的值。如果要使用所讨论对象的许多成员，这特别有用：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">maybeNull?.apply {
    firstFunction(this)
    secondFunction(this)
    memberPropertyA = memberPropertyB + memberFunctionA()
}?.memberFunctionB()
</code></pre>
</div>
<p>在 <code>apply</code> 块中，<code>this 是指 </code>maybeNull<code>。在 </code>memberPropertyA<code>，</code>memberPropertyB<code> 与 </code>memberFunctionA<code> 之前有一个隐含的 </code>this<code>（除非这些在 </code>maybeNull<code> 上不存在，在这种情况下将在包含的作用域中查找它们）。此后，也可以在 </code>maybeNull<code> 上调用 </code>memberFunctionB()`。</p>
<p>如果发现 <code>this</code> 语法令人困惑，则可以改用 <code>also</code>，它以普通的 lambda 作为参数：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">maybeNull?.also {
    firstFunction(it)
    secondFunction(it)
    it.memberPropertyA = it.memberPropertyB + it.memberFunctionA()
}?.memberFunctionB()
</code></pre>
</div>
<h3 id="takeif-与-takeunless"><code>takeIf()</code> 与 <code>takeUnless()</code></h3>
<p>如果仅在满足特定条件时才使用值，请尝试 <code>takeIf()</code>，如果满足给定谓词，则返回它被调用的值，否则返回空值。还有 <code>takeUnless()</code>，其逻辑正好相反。可以在其后接一个 <code>?.</code>，以仅在满足谓词的情况下对该值执行运算。下面，计算某些表达式的平方，但前提是表达式的值至少为 42：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val result = someExpression.takeIf { it &gt;= 42 } ?.let { it * it }
</code></pre>
</div>
<hr/>
<table>
<tbody>
<tr>
<td><a href="null-safety.html">← 上一节：空安全</a></td>
<td><a href="packages-and-imports.html">下一节：包与导入 →</a></td>
</tr>
</tbody>
</table>
<hr/>
<p><em>本资料英文原文的作者是 <a href="https://eldhuset.net/">Aasmund Eldhuset</a>；其所有权属于<a href="https://www.khanacademy.org/">可汗学院（Khan Academy）</a>，授权许可为 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/us/">CC BY-NC-SA 3.0 US（署名-非商业-相同方式共享）</a>。请注意，这并不是可汗学院官方产品的一部分。中文版由<a href="https://hltj.me/">灰蓝天际</a>、<a href="https://github.com/Yue-plus">Yue-plus</a> 翻译，遵循相同授权方式。</em></p>

        </article>
    </div>
        </div>

</div>

<footer role="contentinfo" class="global-footer">

    <div class="global-footer-terms">
        <div class="g-layout">
            <ul class="terms-social">
                <li class="terms-social__item terms-social__item_blog">
                    <a target="_blank" class="link" href="http://blog.jetbrains.com/kotlin">博客</a>
                </li>
                <li class="terms-social__item terms-social__item_forum">
                    <a target="_blank" class="link" href="https://discuss.kotlinlang.org">论坛</a>
                </li>
                <li class="terms-social__item terms-social__item_bug-tracker">
                    <a target="_blank" class="link" href="https://youtrack.jetbrains.com/issues/KT">问题跟踪</a>
                </li>
                <li class="terms-social__item terms-social__item_github">
                    <a target="_blank" class="link" href="https://github.com/JetBrains/kotlin">GitHub</a>
                </li>
                <li class="terms-social__item terms-social__item_twitter">
                    <a target="_blank" class="link" href="https://twitter.com/kotlin">Twitter</a>
                </li>
            </ul>
            <div class="global-footer-container">
                <div class="global-footer-row-left">
                        <p class="terms-para"><a class="terms-kit"
                              href="/contribute.html">为 Kotlin 做贡献</a></p>
                    <p class="terms-para"><a class="terms-kit"
                                             href="/eap/">抢先体验预览</a></p>
                        <p class="terms-para"><a class="terms-kit"
                              href=/assets/kotlin-media-kit.pdf>宣传资料</a></p>
                    <div class="terms-copyright">
                        采用 <a href="https://github.com/JetBrains/kotlin-web-site/blob/master/LICENSE">Apache
                        2
                        授权许可</a>
                    </div>

                    <div class="terms-foundation">
                        Kotlin 商标受 <a
                            href="/foundation/kotlin-foundation.html">Kotlin 基金会</a>保护
                    </div>
                </div>
                <div class="global-footer-row-right">
                    <div class="terms-sponsor">
                        由 <a href="http://jetbrains.com" class="sponsor sponsor_jetbrains jetbrains-logo _logo-jetbrains"
                                                      target="_blank">JetBrains</a> 赞助及开发；
                    </div>
                    <div class="terms-sponsor">
                        由<a href="https://hltj.me/" class="testimonial-company-link" target="_blank" rel="nofollow">灰蓝天际</a>、
                        <a href="http://tanfujun.com" class="testimonial-company-link" target="_blank" rel="nofollow">晓_晨DEV</a>、
                        <a href="https://github.com/qiaoyuang" class="testimonial-company-link" target="_blank" rel="nofollow">乔禹昂</a>、
                        <a href="https://github.com/SpielbergGao" class="testimonial-company-link" target="_blank" rel="nofollow">高金龙</a>、
                        <a href="https://github.com/HoshinoTented" class="testimonial-company-link" target="_blank" rel="nofollow">HoshinoTented</a>、
                        <a href="https://www.liuwj.me" class="testimonial-company-link" target="_blank" rel="nofollow">刘文俊</a>、
                        <a href="https://github.com/Hiwensen" class="testimonial-company-link" target="_blank" rel="nofollow">常少威</a>、
                        <a href="https://github.com/Yue-plus" class="testimonial-company-link" target="_blank" rel="nofollow">Yue-plus</a>、
                        <a href="https://github.com/Guolianxing" class="testimonial-company-link" target="_blank" rel="nofollow">Guolianxing</a>
                        &nbsp;<a href="/contribute.html#中文站翻译贡献者" class="testimonial-company-link" target="_blank" rel="nofollow">等</a>译
                    </div>
                </div>
            </div>
        </div>
    </div>

</footer><div class="search-popup _hidden" tabindex="1000">
    <div class="search-popup__content">
        <div class="search-popup__controls">
            <div class="search-popup__input"></div>
            <div class="search-popup__close">
                <div class="search-popup__close-icon-wrapper">
                    <div class="search-popup__close-icon"></div>
                </div>
                <div class="search-popup__close-text">esc</div>
            </div>
        </div>
        <div class="search-popup__results"></div>
    </div>
</div>
<script src="/_assets/common.js?&amp;v=b72536267657675565fa52482c2a3e7c"></script>
    <script src="/_assets/tutorial.js?&amp;v=8ee6bb15892f329fdb2d95d7245e0677"></script>
</body>
</html>