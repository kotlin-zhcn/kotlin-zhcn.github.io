<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=1000, initial-scale=1">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5W8DZRW');</script>
<!-- End Google Tag Manager -->

<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="dns-prefetch" href="//fonts.gstatic.com">
<link rel="dns-prefetch" href="//resources.jetbrains.com">


<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<link rel="Shortcut Icon" href="/assets/images/favicon.ico" type="image/x-icon"/>
<link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png"/>
<link rel="apple-touch-icon" sizes="72x72"
      href="/assets/images/apple-touch-icon-72x72.png"/>
<link rel="apple-touch-icon" sizes="114x114"
      href="/assets/images/apple-touch-icon-114x114.png"/>
<link rel="apple-touch-icon" sizes="144x144"
      href="/assets/images/apple-touch-icon-144x144.png"/>

<link rel="stylesheet" href="/_assets/styles.css?&amp;v=c06222c630c3128e0748d3348e5c1069">

<!-- Social Media tag Starts -->
<!-- Place this data between the <head> tags of your website -->
<!-- Open Graph data -->
<meta property="og:title" content=""/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="https://www.kotlincn.net/foundation/submitting-incompatible-changes.html"/>
<meta property="og:image" content="https://www.kotlincn.net/assets/images/open-graph/kotlin_250x250.png"/>
    <meta property="og:description" content="">
<meta property="og:site_name" content="Kotlin"/>

<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@kotlin">
<meta name="twitter:title" content="">
    <meta name="twitter:description" content="">
<meta name="twitter:image:src" content="https://www.kotlincn.net/assets/images/twitter-card/kotlin_800x320.png">
<!-- Social Media tag Ends -->

    <title>Guide to Submitting Incompatible Changes - Kotlin 语言中文站</title>

    <link rel="stylesheet" href="/_assets/common.css?&amp;v=9e6fbfc1663315f135a0fd5e146c021a"/>
</head>
<body class="">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5W8DZRW"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<div class="global-layout">

    <div class="global-header-panel banner-nav">
        <div class="g-layout">
<!--
<div class="global-nav banner-container">
    <a class="banner-text" href="https://www.jetbrains.com/promo/kotlin-heroes/" target="_blank">
        <div class="banner-item title">
            Kotlin Heroes #4 编程挑战赛（北京时间 5-29 22:35）
        </div>
        <div class="banner-item underline">
            立即报名！
        </div>
    </a>
    <div class="close-head-banner"></div>
</div>
-->        </div>
    </div>
<header class="global-header">
    <div class="global-header-panel">
        <div class="g-layout">
            <a class="global-header-logo" href="/">Kotlin</a> <a href="https://github.com/JetBrains/kotlin/releases/tag/v1.3.72" target="_blank" class="global-header-logo__version">1.3.72</a>
<nav class="global-nav">
    <div class="nav-links">
            <a href="https://www.kotliner.cn/" class="nav-item  nav-item-external" target="_blank" >
                博客
            </a>
            <a href="https://discuss.kotliner.cn/" class="nav-item  nav-item-external" target="_blank" >
                论坛
            </a>
            <a href="/docs/reference/" class="nav-item ">
                学习
            </a>
            <a href="/community/" class="nav-item ">
                社区
            </a>
            <a href="https://play.kotlinlang.org" class="nav-item  nav-item-external" target="_blank" >
                演练
            </a>
    </div>
    <div class="search-button">
        <div class="icon"></div>
    </div>
</nav>        </div>
    </div>
</header>        <div class="g-layout global-content">

    <div class="g-grid">

        <aside class="g-3">
            <div class="js-side-tree-nav">
                         <div class="tree-item tree-leaf js-item js-leaf ">
                        <a href="/foundation/kotlin-foundation.html"
                           class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                        >
                            <span class="marker"></span>
                            <span class="text">Kotlin 基金会</span>
                        </a>
                </div>
                         <div class="tree-item tree-leaf js-item js-leaf ">
                        <a href="/foundation/language-committee-guidelines.html"
                           class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                        >
                            <span class="marker"></span>
                            <span class="text">语言委员会指南</span>
                        </a>
                </div>
                         <div class="tree-item tree-leaf js-item js-leaf ">
                        <div class="tree-item-title tree-leaf-title js-item-title js-leaf-title is_active ">
                            <div class="marker"></div>
                            <div class="text">提交不兼容的变更</div>
                        </div>
                </div>
                         <div class="tree-item tree-leaf js-item js-leaf ">
                        <a href="/foundation/guidelines.html"
                           class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                        >
                            <span class="marker"></span>
                            <span class="text">Kotlin 品牌使用指南</span>
                        </a>
                </div>
                         <div class="tree-item tree-leaf js-item js-leaf ">
                        <a href="/foundation/faq.html"
                           class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                        >
                            <span class="marker"></span>
                            <span class="text">FAQ</span>
                        </a>
                </div>
            </div>
        </aside>

        <article role="main" class="page-content g-9">

                
<h1 id="guide-to-submitting-incompatible-changes">Guide to Submitting Incompatible Changes</h1>
<p>A proposal is usually written by a developer responsible for the change or the relevant subsystems. It has to be described in the <a href="https://youtrack.jetbrains.net/issues/KT?q=%23for-language-committee%20%23Unresolved%20tag:%20-language-committee-approved">issue tracker</a> and marked with the "for-language-committee" tag. To provide all the necessary details, issue in the tracker should follow the template below.</p>
<h1 id="issue-template">Issue template</h1>
<p>The issue should follow this template:</p>
<pre><code># Classification

Type of change: &lt;see guide below&gt;
Motivation types: &lt;see guide below&gt;
Impact types: &lt;see guide below&gt;
Detection and Migration modes: &lt;see guide below&gt;

# Background
&gt; Optional Section. Describe the background of the issue and possibly some motivation
# Existing behaviour
&gt; 1. (Minimal) code example
&gt; 2. What's wrong with it
&gt; 3. Detailed explanation of why and how this happens
&gt; 4. Any known reasoning behind such behavior
&gt; 5. Affected versions: when did the problem appear first? 

# Proposed changes
&gt; 1. Proposed changes
&gt; 2. How it fixes the issue?

# Impact
&gt; Examples of negative effects: changes of behavior, previously compiled code forbidden, etc.
&gt; If possible: 
&gt; * number of impacted users
&gt; * how common this pattern is
&gt; * if we believe it's a rare case, why
&gt; * is automated migration possible

# Migration plan
&gt; Provide a detailed step-by-step migration plan
&gt; Can the proposed changes be implemented immediately in the progressive mode?
</code></pre>
<h1 id="classification">Classification</h1>
<p>This section needs to classify the change, without describing its essence. The classification is used by the Committee to quickly assess the severity of the issue. Here are the common categories to be used.</p>
<p>This section can be used as a checklist of things that need to be evaluated/thought of.</p>
<h2 id="type-of-change">Type of change</h2>
<p>Specify one or more of the following:</p>
<ul>
<li>New errors are introduced</li>
<li>Some valid language constructs change their meaning</li>
<li>Change in the standard library
    <ul>
<li>API removal
        <ul>
<li>Affecting ABI</li>
<li>Not affecting ABI</li>
</ul>
</li>
<li>API moved to different artifact</li>
<li>API type signature change
        <ul>
<li>Affecting ABI</li>
<li>Not affecting ABI</li>
</ul>
</li>
<li>Contract refinement</li>
<li>Other contract changes</li>
</ul>
</li>
<li>Change in compilation strategy
    <ul>
<li>Change in ABI</li>
<li>Change in the behavior of generated code</li>
</ul>
</li>
<li>Change in interoperability layer(s)</li>
</ul>
<h2 id="motivation-types">Motivation types</h2>
<p>Specify one or more of the following:</p>
<ul>
<li>User code fails with exception(s)</li>
<li>Compiler/Tooling fails with exception(s)</li>
<li>The implementation does not abide by a published spec or documentation</li>
<li>Type safety guarantees are not met (including fail-fast behavior for non-null types)</li>
<li>Separate/incremental compilation guarantees are not met</li>
<li>API stability guarantees are not met</li>
<li>ABI stability guarantees are not met</li>
<li>Implementation changes are required for implementation design/architectural reasons</li>
<li>Problematic/meaningless usage patterns need to be discouraged/blocked (e.g. counterintuitive behaviors)
    <ul>
<li>Code is error-prone</li>
<li>Code can't be compiled correctly</li>
</ul>
</li>
<li>Some prospective language changes are blocked</li>
<li>Inconsistency in the design (things are done differently in different contexts)</li>
<li>Redundant/outdated mechanism</li>
</ul>
<h2 id="impact-types">Impact types</h2>
<ul>
<li><strong>Compilation</strong>. Some code that used to compile won't compile any more
    <ul>
<li>Such code always caused the compiler to fail with exception</li>
<li>Such code always threw an exception immediately upon execution or could not link</li>
<li>Such code inevitably caused exceptions to be thrown somewhere down the line after it was executed</li>
<li>There were cases when such code worked with no exceptions
        <ul>
<li>There was a warning reported on all such code</li>
<li>Some such code could compile without any warnings</li>
</ul>
</li>
</ul>
</li>
<li><strong>Binaries</strong>. Some binary metadata will change after recompilation
    <ul>
<li>Internal (and maybe private) signatures
        <ul>
<li>None of them could have been called from other languages</li>
<li>Some of them may have been callable from other languages (Java/JS/C/Swift/…)</li>
</ul>
</li>
<li>Public and/or protected signatures may change</li>
</ul>
</li>
<li><strong>Behavior</strong> changes
    <ul>
<li>Exceptions
        <ul>
<li>Some exceptions may change their type or place, but all code that ran without exceptions keeps doing so
            <ul>
<li>Some exceptions can be thrown earlier than before</li>
<li>Some exceptions can be thrown later than before</li>
<li>Some exceptions change their type, but not the point of execution at which they are thrown
                <ul>
<li>The new type is a subtype of the old one</li>
<li>The new type is not a subtype of the old one</li>
</ul>
</li>
</ul>
</li>
<li>Some code that compiled and ran without exceptions will throw exceptions in the new version</li>
</ul>
</li>
<li>The behavior in question belongs under a previously released specification, contract or official documentation
        <ul>
<li>By the contract, the old behavior is incorrect (thus a fix is needed)</li>
<li>The contract doesn't specify this behavior
            <ul>
<li>The new behaviour needs to be specified</li>
<li>The new behavior will remain unspecified</li>
</ul>
</li>
<li>The new behavior contradicts the contract (i.e. the contract has to be changed)</li>
</ul>
</li>
</ul>
</li>
<li><strong>Performance and code size</strong>
<ul>
<li>Some code may run slower (including "small" changes like extra checks and indirections)</li>
<li>Some code may make more allocations or otherwise consume more memory</li>
<li>Code size may increase
        <ul>
<li>The increase in code size is constant regardless of the source</li>
<li>The increase in code size is proportional to some parameters of the source</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="detection-and-migration-modes">Detection and Migration modes</h2>
<ul>
<li>All code locations affected by this change can be accurately detected statically</li>
<li>Some, but not all code locations affected by this change can be accurately detected statically</li>
<li>No code locations affected by this change can be accurately detected statically</li>
<li>Migration can be fully automated</li>
<li>Some automated migration is possible</li>
<li>Migration can't be automated</li>
</ul>

        </article>
    </div>
        </div>

</div>

<footer role="contentinfo" class="global-footer">

    <div class="global-footer-terms">
        <div class="g-layout">
            <ul class="terms-social">
                <li class="terms-social__item terms-social__item_blog">
                    <a target="_blank" class="link" href="http://blog.jetbrains.com/kotlin">博客</a>
                </li>
                <li class="terms-social__item terms-social__item_forum">
                    <a target="_blank" class="link" href="https://discuss.kotlinlang.org">论坛</a>
                </li>
                <li class="terms-social__item terms-social__item_bug-tracker">
                    <a target="_blank" class="link" href="https://youtrack.jetbrains.com/issues/KT">问题跟踪</a>
                </li>
                <li class="terms-social__item terms-social__item_github">
                    <a target="_blank" class="link" href="https://github.com/JetBrains/kotlin">GitHub</a>
                </li>
                <li class="terms-social__item terms-social__item_twitter">
                    <a target="_blank" class="link" href="https://twitter.com/kotlin">Twitter</a>
                </li>
            </ul>
            <div class="global-footer-container">
                <div class="global-footer-row-left">
                        <p class="terms-para"><a class="terms-kit"
                              href="/contribute.html">为 Kotlin 做贡献</a></p>
                    <p class="terms-para"><a class="terms-kit"
                                             href="/eap/">抢先体验预览</a></p>
                        <p class="terms-para"><a class="terms-kit"
                              href=/assets/kotlin-media-kit.pdf>宣传资料</a></p>
                    <div class="terms-copyright">
                        采用 <a href="https://github.com/JetBrains/kotlin-web-site/blob/master/LICENSE">Apache
                        2
                        授权许可</a>
                    </div>

                    <div class="terms-foundation">
                        Kotlin 商标受 <a
                            href="/foundation/kotlin-foundation.html">Kotlin 基金会</a>保护
                    </div>
                </div>
                <div class="global-footer-row-right">
                    <div class="terms-sponsor">
                        由 <a href="http://jetbrains.com" class="sponsor sponsor_jetbrains jetbrains-logo _logo-jetbrains"
                                                      target="_blank">JetBrains</a> 赞助及开发；
                    </div>
                    <div class="terms-sponsor">
                        由<a href="https://hltj.me/" class="testimonial-company-link" target="_blank" rel="nofollow">灰蓝天际</a>、
                        <a href="http://tanfujun.com" class="testimonial-company-link" target="_blank" rel="nofollow">晓_晨DEV</a>、
                        <a href="https://github.com/qiaoyuang" class="testimonial-company-link" target="_blank" rel="nofollow">乔禹昂</a>、
                        <a href="https://github.com/SpielbergGao" class="testimonial-company-link" target="_blank" rel="nofollow">高金龙</a>、
                        <a href="https://github.com/HoshinoTented" class="testimonial-company-link" target="_blank" rel="nofollow">HoshinoTented</a>、
                        <a href="https://www.liuwj.me" class="testimonial-company-link" target="_blank" rel="nofollow">刘文俊</a>、
                        <a href="https://github.com/Hiwensen" class="testimonial-company-link" target="_blank" rel="nofollow">常少威</a>、
                        <a href="https://github.com/Yue-plus" class="testimonial-company-link" target="_blank" rel="nofollow">Yue-plus</a>、
                        <a href="https://github.com/Guolianxing" class="testimonial-company-link" target="_blank" rel="nofollow">Guolianxing</a>
                        &nbsp;<a href="/contribute.html#中文站翻译贡献者" class="testimonial-company-link" target="_blank" rel="nofollow">等</a>译
                    </div>
                </div>
            </div>
        </div>
    </div>

</footer><div class="search-popup _hidden" tabindex="1000">
    <div class="search-popup__content">
        <div class="search-popup__controls">
            <div class="search-popup__input"></div>
            <div class="search-popup__close">
                <div class="search-popup__close-icon-wrapper">
                    <div class="search-popup__close-icon"></div>
                </div>
                <div class="search-popup__close-text">esc</div>
            </div>
        </div>
        <div class="search-popup__results"></div>
    </div>
</div>
<script src="/_assets/common.js?&amp;v=b72536267657675565fa52482c2a3e7c"></script>
</body>
</html>